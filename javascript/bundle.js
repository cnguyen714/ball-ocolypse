/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./javascript/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./javascript/Game.js":
/*!****************************!*\
  !*** ./javascript/Game.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _obj_Player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./obj/Player */ \"./javascript/obj/Player.js\");\n/* harmony import */ var _obj_Particle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./obj/Particle */ \"./javascript/obj/Particle.js\");\n/* harmony import */ var _obj_factory_particle_factory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./obj/factory/particle_factory */ \"./javascript/obj/factory/particle_factory.js\");\n/* harmony import */ var _obj_factory_enemy_factory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./obj/factory/enemy_factory */ \"./javascript/obj/factory/enemy_factory.js\");\n/* harmony import */ var _obj_Slam__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./obj/Slam */ \"./javascript/obj/Slam.js\");\n/* harmony import */ var _obj_Beam__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./obj/Beam */ \"./javascript/obj/Beam.js\");\n/* harmony import */ var _obj_Explosion__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./obj/Explosion */ \"./javascript/obj/Explosion.js\");\n/* harmony import */ var _obj_GameObject__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./obj/GameObject */ \"./javascript/obj/GameObject.js\");\n/* harmony import */ var _obj_SlashSpark__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./obj/SlashSpark */ \"./javascript/obj/SlashSpark.js\");\n/* harmony import */ var _lib_BufferLoader__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lib/BufferLoader */ \"./javascript/lib/BufferLoader.js\");\n/* harmony import */ var _obj_DeathExplosion__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./obj/DeathExplosion */ \"./javascript/obj/DeathExplosion.js\");\n\n\n\n\n\n\n \n \n\n\n\n\n\n\n\n// My laptop has a performance limit of around 700 particles\n// Delta time is implemented by accelerating movement to perceive less\n// lag, however the game still runs slower\n\n\n\n/*\nAccess this on localhost:8000 by running both:\nnpm start\npython -m SimpleHTTPServer\nOR\npy -m http.server\n\n===\n\nTo-do:\n\nUse Web Audio Context to vary pitch/playback speed on sounds like Melee\n\n*/\n\nconst PATH = document.URL.substr(0, document.URL.lastIndexOf('/'));\nconst STATE_INIT = \"STATE_INIT\";\nconst STATE_BEGIN = \"STATE_BEGIN\";\nconst STATE_RUNNING = \"STATE_RUNNING\";\nconst STATE_OVER = \"STATE_OVER\";\n\nconst FPS = 60;\nconst NORMAL_TIME_DELTA = 1000 / FPS;\nconst MIN_FRAME_RATE = 40; // Limits enemy production to save frames\n\nconst BASE_SPAWN_RATE = 4; // 5\nconst SPAWN_LOCKOUT_TIME = 60; // 5\nconst DIFFICULTY_START = 1;\nconst DIFFICULTY_INTERVAL = 0;\nconst DIFFICULTY_MULTIPLIER = 0.020;\nconst DIFFICULTY_RATE = 1;\nconst MAX_DIFFICULTY = 100;\n\nconst STARTING_HEALTH = 250;\n\nconst LINKED_IN_ICON = new Image();\nLINKED_IN_ICON.src = `${PATH}/assets/iconfinder_square-linkedin_317725.png`;\nconst MUTE = new Image(50,50);\nMUTE.src = `${PATH}/assets/mute.png`;\nconst VOL = new Image(50, 50);\nVOL.src = `${PATH}/assets/volume.png`;\nconst WASD = new Image();\nWASD.src = `${PATH}/assets/WASD.png`;\nconst LEFT_MOUSE_ICON = new Image();\nLEFT_MOUSE_ICON.src = `${PATH}/assets/left.png`;\nconst RIGHT_MOUSE_ICON = new Image();\nRIGHT_MOUSE_ICON.src = `${PATH}/assets/right.png`;\nconst SPACEBAR_ICON = new Image();\nSPACEBAR_ICON.src = `${PATH}/assets/spacebar.png`;\n\nclass Game {\n  constructor(cvs, ctx) {\n    this.STATE_INIT = STATE_INIT;\n    this.STATE_BEGIN = STATE_BEGIN;\n    this.STATE_RUNNING = STATE_RUNNING;\n    this.STATE_OVER = STATE_OVER;\n    this.cvs = cvs;\n    this.ctx = ctx;\n    this.highscore = 0;\n    this.score = 0;\n    this.pauseTime = 0;\n    this.mute = false;\n    this.filePath = PATH;\n    this.assetsLoaded = false;\n    this.cheat = false;\n\n    this.timeTracker = (new Date).getTime() + NORMAL_TIME_DELTA;\n    this.prevTime = (new Date).getTime();\n\n    this.state = STATE_INIT;\n\n    // preload audio\n    this.defeatSfx = new Audio(`${PATH}/assets/DEFEATED.wav`);\n    this.enemyDeathSfx = new Audio(`${PATH}/assets/boom2.wav`);\n    this.playerShootSfx = new Audio(`${PATH}/assets/laser7.wav`);\n    this.playerSlashSfx = new Audio(`${PATH}/assets/SE_00064.wav`);\n    this.playerBeamSfx = new Audio(`${PATH}/assets/SE_00049.wav`);\n    this.playerChargeSfx = new Audio(`${PATH}/assets/SE_00016.wav`);\n    this.playerChargeFollowSfx = new Audio(`${PATH}/assets/SE_00049.wav`);\n    this.enemyResistSlashSfx = new Audio(`${PATH}/assets/SE_00017.wav`);\n    this.enemyHitSfx = new Audio(`${PATH}/assets/impact.wav`);\n\n    // this.bgm = new Audio(`${PATH}/assets/305_Battlefield_-_Swords_Bursting.mp3`);\n    // this.bgm.loop = true;\n\n    this.init = this.init.bind(this);\n    this.loop = this.loop.bind(this);\n  }\n\n  initAudio() {\n    var bufferLoader;\n    let game = this;\n\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n    this.audioContext = new AudioContext();\n\n    bufferLoader = new _lib_BufferLoader__WEBPACK_IMPORTED_MODULE_10__[\"default\"](\n      this.audioContext,\n      [\n        `${PATH}/assets/DEFEATED.wav`,\n        `${PATH}/assets/boom2.wav`,\n        `${PATH}/assets/laser7.wav`,\n        `${PATH}/assets/SE_00064.wav`,\n        `${PATH}/assets/SE_00049.wav`,\n        `${PATH}/assets/SE_00016.wav`,\n        `${PATH}/assets/SE_00049.wav`,\n        `${PATH}/assets/SE_00017.wav`,\n        `${PATH}/assets/impact.wav`,\n        `${PATH}/assets/305_Battlefield_-_Swords_Bursting.mp3`,\n        `${PATH}/assets/Retro Vehicle Motor 02.wav`,\n        \n      ],\n      finishedLoading\n    );\n\n    bufferLoader.load();\n    this.audioBuffer = bufferLoader;\n\n    function finishedLoading(bufferList) {\n\n      game.AUDIO_BUFFERS = {\n        defeatSfx: bufferList[0],\n        enemyDeathSfx: bufferList[1],\n        playerShootSfx: bufferList[2],\n        playerSlashSfx: bufferList[3],\n        playerBeamSfx: bufferList[4],\n        playerChargeSfx: bufferList[5],\n        playerChargeFollowSfx: bufferList[6],\n        enemyResistSlashSfx: bufferList[7],\n        enemyHitSfx: bufferList[8],\n        bgm: bufferList[9],\n        preDefeatSfx: bufferList[10],\n      }\n      game.bgm = createAudio(game, game.AUDIO_BUFFERS.bgm, 0.7);\n      game.bgm.loop = true;\n      game.preDefeatSfx = createAudio(game, game.AUDIO_BUFFERS.preDefeatSfx, 1.5);\n      // game.bgm.sourceNode.loop = true;\n      // game.bgm.gainNode.gain.value = 0.4;\n      // let source0 = context.createBufferSource();\n      // let source1 = context.createBufferSource();\n      // let source2 = context.createBufferSource();\n      // let source3 = context.createBufferSource();\n      // let source4 = context.createBufferSource();\n      // let source5 = context.createBufferSource();\n      // let source6 = context.createBufferSource();\n      // let source7 = context.createBufferSource();\n      // let source8 = context.createBufferSource();\n      // let source9 = context.createBufferSource();\n      // source0.buffer = bufferList[0];\n      // source1.buffer = bufferList[1];\n      // source2.buffer = bufferList[2];\n      // source3.buffer = bufferList[3];\n      // source4.buffer = bufferList[4];\n      // source5.buffer = bufferList[5];\n      // source6.buffer = bufferList[6];\n      // source7.buffer = bufferList[7];\n      // source8.buffer = bufferList[8];\n      // source9.buffer = bufferList[9];\n\n      // source0.connect(context.destination);\n      // source1.connect(context.destination);\n      // source2.connect(context.destination);\n      // source3.connect(context.destination);\n      // source4.connect(context.destination);\n      // source5.connect(context.destination);\n      // source6.connect(context.destination);\n      // source7.connect(context.destination);\n      // source8.connect(context.destination);\n      // source9.connect(context.destination);\n      // source0.start(0);\n\n      // let source0 = context.createBufferSource();\n      // source0.buffer = bufferList[0];\n      // source0.connect(context.destination);\n      // source0.start(0);\n      game.assetsLoaded = true;\n    }\n\n    function createAudio(game, buffer, vol = 1.0) {\n      let context = game.audioContext;\n      let obj = {};\n      var sourceNode = null,\n          gainNode = null,\n          startedAt = 0,\n          pausedAt = 0,\n          playing = false,\n          volume = vol,\n          loop = false;\n\n      let play = function() {\n        if(game.mute) return;\n        \n        var offset = pausedAt;\n\n        sourceNode = context.createBufferSource();\n        if (!context.createGain)\n        context.createGain = context.createGainNode;\n        gainNode = context.createGain();\n        sourceNode.connect(gainNode);\n        gainNode.connect(context.destination);\n        gainNode.gain.value = volume;\n        sourceNode.buffer = buffer;\n        sourceNode.start(0, offset);\n        sourceNode.loop = loop;\n\n        startedAt = context.currentTime - offset;\n        pausedAt = 0;\n        playing = true;\n      }\n\n      let stop = function() {\n        if (sourceNode) {\n          sourceNode.disconnect();\n          sourceNode.stop(0);\n          sourceNode = null;\n        }\n        pausedAt = 0;\n        startedAt = 0;\n        playing = false;\n      }\n\n      let pause = function () {\n        let elapsed = context.currentTime - startedAt;\n        stop();\n        pausedAt = elapsed;\n      };\n\n      return {\n        sourceNode: sourceNode,\n        gainNode: gainNode,\n        play: play,\n        pause: pause,\n        stop: stop,\n        loop: loop,\n        playing: playing,\n      };\n    }\n  }\n\n  init() {\n    this.ctx.canvas.width = window.innerWidth;\n    this.ctx.canvas.height = window.innerHeight;\n\n    this.score = 0;\n    this.loops = 0;\n    this.loopCount = 0;\n    this.timeSeconds = 0;\n    this.difficulty = DIFFICULTY_START;\n    this.difficultyRate = DIFFICULTY_RATE;\n    // this.spawnRate = SPAWN_RATE;\n    this.fpsCount = 0;\n    this.fps = 0;\n    this.timeDelta = NORMAL_TIME_DELTA;\n    this.normalTimeDelta = NORMAL_TIME_DELTA;\n    \n    this.players = [];\n    this.player = new _obj_Player__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this);\n    this.player.alive = false;\n    this.players.push(this.player);\n    this.cameraPos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.player.pos.x, this.player.pos.y);\n    \n    this.entities = [];\n    this.particles = [];\n    this.enemyParticles = [];\n    this.delayedParticles = [];\n    this.vanity = [];\n    this.menus = [];\n\n    this.player.mountController();\n    this.state = STATE_BEGIN;\n\n    let startGameMenu = new _obj_GameObject__WEBPACK_IMPORTED_MODULE_8__[\"default\"](game);\n    startGameMenu.pos.x = 0,\n    startGameMenu.pos.y = this.cvs.height / 2;\n    startGameMenu.height = 0;\n    startGameMenu.width = this.cvs.width;\n    startGameMenu.color = \"rgba(0,0,0,0.4)\";\n    startGameMenu.aliveTime = 60;\n    startGameMenu.time = this.timeSeconds;\n    startGameMenu.difficulty = this.difficulty;\n    startGameMenu.alpha = 0;\n    startGameMenu.draw = function () {\n      this.aliveTime--;\n      this.ctx.save();\n      this.ctx.fillStyle = this.color;\n      this.ctx.fillRect(0, this.cvs.height / 2 - this.cvs.height / 8 * (60 - this.aliveTime) / 60, this.cvs.width, this.cvs.height / 4 * (60 - this.aliveTime) / 60);\n      if (this.aliveTime <= 0) {\n        if (this.alpha < 1) this.alpha += 0.3;\n        this.aliveTime = 0;\n        let xOffset = this.cvs.width / 2;\n        let yOffset = this.cvs.height - 250;\n        this.ctx.textAlign = 'center';\n\n        this.ctx.fillStyle = `rgba(0,128,128,${this.alpha})`;\n        this.ctx.font = `${this.cvs.height / 8}px sans-serif`;\n        // this.ctx.fillText(`Ball-popcalypse`, this.cvs.width * 0.4 / 16, this.cvs.height * 17/32 );\n        this.ctx.fillText(`Ball-popcalypse`, this.cvs.width / 2, this.cvs.height * 17/32 );\n        this.ctx.fillStyle = `rgba(128,128,128,${this.alpha})`;\n        this.ctx.font = `${this.cvs.height / 32}px sans-serif`;\n        this.ctx.fillText(`How long can you survive the ball menace?`, this.cvs.width / 2, this.cvs.height * 19/32 );\n\n        this.ctx.fillStyle = \"white\";\n        this.ctx.font = '20px sans-serif';\n        this.ctx.shadowBlur = 4;\n        this.ctx.shadowColor = 'black';\n        \n        this.ctx.fillText(`Press a key or mousebutton to start`, xOffset , yOffset);\n        this.ctx.drawImage(WASD, xOffset -= 350, yOffset + 40, 180, 150);\n        this.ctx.fillText(`Movement`, xOffset + 85, yOffset + 210);\n        this.ctx.drawImage(LEFT_MOUSE_ICON, xOffset += 190, yOffset + 13, 200, 180);\n        this.ctx.fillText(`Slash`, xOffset + 100, yOffset + 210);\n        this.ctx.drawImage(RIGHT_MOUSE_ICON, xOffset += 190, yOffset + 43, 120, 150);\n        this.ctx.fillText(`Blaster`, xOffset + 50, yOffset + 210);\n        this.ctx.drawImage(SPACEBAR_ICON, xOffset += 170, yOffset + 113, 200, 80);\n        this.ctx.fillText(`Cannon`, xOffset + 90, yOffset + 210);\n        this.ctx.fillText(`Spacebar`, xOffset + 65, yOffset + 150);\n\n        this.ctx.drawImage(LINKED_IN_ICON, 10, 10, 80, 80);\n      }\n      this.ctx.restore();\n    }\n    \n    this.menus.push(startGameMenu);\n    this.entities.push(_obj_factory_enemy_factory__WEBPACK_IMPORTED_MODULE_4__[\"spawnCircleRandom\"](this.player));\n    this.entities.push(_obj_factory_enemy_factory__WEBPACK_IMPORTED_MODULE_4__[\"spawnCircleRandom\"](this.player));\n    this.entities.push(_obj_factory_enemy_factory__WEBPACK_IMPORTED_MODULE_4__[\"spawnCircleRandom\"](this.player));\n    this.entities.push(_obj_factory_enemy_factory__WEBPACK_IMPORTED_MODULE_4__[\"spawnCircleRandom\"](this.player));\n    this.entities.push(_obj_factory_enemy_factory__WEBPACK_IMPORTED_MODULE_4__[\"spawnCircleRandom\"](this.player));\n\n    if (this.bgm) {\n      this.bgm.stop();\n    }\n  }\n\n  startGame() {\n    if (!this.assetsLoaded) return;\n    this.loopCount = 0;\n    this.state = STATE_RUNNING;\n    this.menus = [];\n    this.entities = [];\n    this.enemyParticles = [];\n    this.vanity = [];\n    this.player.alive = true;\n    this.player.maxHealth = STARTING_HEALTH;\n    this.player.health = STARTING_HEALTH;\n    this.particles.push(new _obj_Slam__WEBPACK_IMPORTED_MODULE_5__[\"default\"](game, this.player.pos.x, this.player.pos.y));\n    // this.playSound(this.bgm, 0.4);\n    this.cheat = false;\n    this.bgm.play();\n  }\n\n  endGame() {\n    this.state = STATE_OVER;\n    this.freeze(90);\n    this.player.alive = false;\n\n    let deathExplosion = new _obj_DeathExplosion__WEBPACK_IMPORTED_MODULE_11__[\"default\"](game);\n    deathExplosion.unpausable = true;\n    deathExplosion.paused = false;\n    this.vanity.push(deathExplosion);\n    this.preDefeatSfx.play();\n    let slam = new _obj_Slam__WEBPACK_IMPORTED_MODULE_5__[\"default\"](game, this.player.pos.x, this.player.pos.y);\n    slam.aliveTime -= 11;\n    this.particles.push(slam);\n\n    let postDeath = function() {\n      let explode1 = new _obj_Slam__WEBPACK_IMPORTED_MODULE_5__[\"default\"](game, this.player.pos.x, this.player.pos.y);\n      explode1.color = 'white';\n      explode1.knockback = 100;\n      explode1.damage = 10;\n      explode1.r = 310;\n      this.particles.push(explode1);\n      let explode2 = new _obj_Slam__WEBPACK_IMPORTED_MODULE_5__[\"default\"](game, this.player.pos.x, this.player.pos.y);\n      explode2.color = 'gray';\n      explode2.knockback = 0;\n      explode2.damage = 40;\n      explode2.r = 300;\n      this.particles.push(explode2);\n      let explode3 = new _obj_Slam__WEBPACK_IMPORTED_MODULE_5__[\"default\"](game, this.player.pos.x, this.player.pos.y);\n      explode3.color = 'black';\n      explode3.knockback = 0; \n      explode3.damage = 999999;\n      explode3.r = 100;\n      this.particles.push(explode3);\n      this.preDefeatSfx.stop();\n      this.player.color = 'black'; \n\n      this.playSound(this.defeatSfx, 0.2);\n    }\n\n    postDeath = postDeath.bind(this);\n    setTimeout(postDeath, 1500);\n\n    let drawEnd = function() {\n      let endGameMenu = new _obj_GameObject__WEBPACK_IMPORTED_MODULE_8__[\"default\"](game);\n      endGameMenu.pos.x = 0,\n      endGameMenu.pos.y = this.cvs.height / 2;\n      endGameMenu.height = 0;\n      endGameMenu.width = this.cvs.width;\n      endGameMenu.color = \"rgba(0,0,0,0.5)\";\n      endGameMenu.aliveTime = 60;\n      endGameMenu.time = this.timeSeconds;\n      endGameMenu.difficulty = this.difficulty;\n      endGameMenu.draw = function() {\n        this.aliveTime--;\n        this.ctx.save();\n        this.ctx.fillStyle = this.color;\n        this.ctx.fillRect(0, this.cvs.height / 2 - this.cvs.height / 8 * (60 - this.aliveTime) / 60, this.cvs.width, this.cvs.height / 4 * (60 - this.aliveTime) / 60);\n        if (this.aliveTime <=0) {\n          this.aliveTime = 0;\n          this.ctx.fillStyle = 'white';\n          this.ctx.font = '20px sans-serif';\n          \n          this.ctx.fillText(`Score: ${this.game.score}`, this.cvs.width / 2 - 70, this.cvs.height / 2 - 40);\n          this.ctx.fillText(`Highscore: ${this.game.highscore}`, this.cvs.width / 2 - 70, this.cvs.height / 2 - 20 );\n          this.ctx.fillText(`Time: ${this.time}`, this.cvs.width / 2 - 70, this.cvs.height / 2 );\n          this.ctx.fillText(`Difficulty: ${this.difficulty.toFixed(2)}`, this.cvs.width / 2 - 70, this.cvs.height / 2 + 20);\n          this.ctx.textAlign = 'center';\n\n          this.ctx.fillText(`Press [Enter] to restart`, this.cvs.width / 2,  this.cvs.height / 2 + 80);\n\n          this.ctx.textAlign = 'right';\n\n          this.ctx.fillText(\"♪♪  Yuzo Koshiro - 7th Dragon OST || Battlefield - Swords Bursting (Retro Ver.)\", this.cvs.width - 20, this.cvs.height - 20);\n        }\n        this.ctx.restore();\n      }\n      if (this.state === STATE_OVER) this.menus.push(endGameMenu);\n    }\n    drawEnd = drawEnd.bind(this);\n    setTimeout(drawEnd, 3500);\n  }\n\n  restartGame() {\n    this.init();\n  }\n\n  playSound(sound, vol = 1) {\n    if (this.mute) return;\n\n    sound.volume = vol;\n    sound.play();\n  }\n\n  playAudio(audio, vol = 1.0, loop = false) {\n    if (this.mute) return;\n\n    let source = this.audioContext.createBufferSource();\n    source.buffer = this.audioBuffer.bufferList[audio];\n    let gainNode = this.audioContext.createGain();\n    source.connect(gainNode);\n    \n    gainNode.connect(this.audioContext.destination);\n    gainNode.gain.value = vol;\n    source.loop = loop;\n    source.start(0);\n  }\n\n  playSoundMany(path, vol = 1) {\n    if (this.mute) return;\n    let sound = new Audio(path);\n    sound.volume = vol;\n    sound.play();\n  }\n\n  // Freezes the entire game state for n frames\n  // Typically use this for hitstop\n  freeze(n) {\n    this.pauseTime = n;\n    this.vanity.forEach(entity => {\n      if (entity.unpausable) {\n        entity.paused = false;\n      } else {\n        entity.paused = true;\n      }\n    });\n  }\n\n  update() {\n    this.loopCount++;\n    if (this.highscore < this.score) this.highscore = this.score;\n\n    switch(this.state) {\n      case STATE_INIT: \n        this.init();\n        break;\n\n      case STATE_BEGIN:\n        if (this.loopCount % 120 === 0 && this.fps >= MIN_FRAME_RATE && this.loopCount > 60) {\n          this.entities.push(_obj_factory_enemy_factory__WEBPACK_IMPORTED_MODULE_4__[\"spawnCircleRandom\"](this.player));\n          if (this.loopCount % 240 === 0) {\n            this.player.pos.x = 200 + Math.random() * (this.cvs.width - 200 * 2);\n            this.player.pos.y = 200 + Math.random() * (this.cvs.height - 200 * 2);\n          }\n        }\n        this.players.forEach(entity => entity.update());\n        this.entities.forEach(entity => entity.update());\n        this.particles.forEach(entity => entity.update());\n        break;\n\n      case STATE_RUNNING:\n\n        if (this.pauseTime === 0) {\n          this.vanity.forEach(entity => entity.paused = false);\n          this.particles = this.particles.concat(this.delayedParticles);\n          this.delayedParticles = [];\n        }\n\n        if (this.pauseTime > 0) {\n          this.vanity = this.vanity.filter(entity => entity.alive);\n          this.vanity.filter(entity => !entity.paused).forEach(entity => entity.update());\n        } else {\n          if (this.loopCount % DIFFICULTY_INTERVAL === 0) {\n            this.difficulty *= 1 + DIFFICULTY_MULTIPLIER * this.difficultyRate;\n          }\n          if (this.difficulty > MAX_DIFFICULTY) this.difficulty = MAX_DIFFICULTY;\n\n          // Generate enemies -\n          // Stop making enemies if you miss too many frame deadlines, also keep generating enemies if the FPS drop was to player using beam\n          let spawnRate = 20 - Math.floor(this.difficulty);\n          spawnRate = spawnRate <= 1 ? 1 : spawnRate;\n          if (this.loopCount % Math.floor((BASE_SPAWN_RATE + spawnRate) * (this.fps >= MIN_FRAME_RATE ? 1 : 2)) === 0 && this.pauseTime === 0 && this.loopCount > SPAWN_LOCKOUT_TIME) {\n            this.entities.push(_obj_factory_enemy_factory__WEBPACK_IMPORTED_MODULE_4__[\"spawnCircleRandom\"](this.player));\n          }\n\n          // Handle enemy death\n          let soundLimit = 3;\n          let soundCount = 0;\n          this.entities.filter(entity => !entity.alive).forEach(entity => {\n            if (soundCount <= soundLimit) {\n              this.playSoundMany(`${PATH}/assets/boom2.wav`, 0.3);\n              soundCount++;\n            }\n            this.vanity.push(new _obj_Explosion__WEBPACK_IMPORTED_MODULE_7__[\"default\"](game, entity.pos.x, entity.pos.y, entity.r * 1.5, entity.vel))\n\n            this.difficulty += 0.002 * this.difficultyRate;\n            this.score += entity.score;\n            this.player.charge++;\n          });\n\n          // Handle updates\n          this.player.update();\n          this.vanity = this.vanity.filter(entity => entity.alive);\n          this.vanity.forEach(entity => entity.update());\n          this.entities = this.entities.filter(entity => entity.alive);\n          this.entities.forEach(entity => entity.update());\n          this.particles = this.particles.filter(entity => entity.alive);\n          this.particles.forEach(entity => entity.update());\n          this.enemyParticles = this.enemyParticles.filter(entity => entity.alive);\n          this.enemyParticles.forEach(entity => entity.update());\n\n\n\n          if (this.player.health <= 0) this.endGame();\n        }\n        break;\n\n      case STATE_OVER:\n        if (this.pauseTime > 0) {\n          this.vanity = this.vanity.filter(entity => entity.alive);\n          this.vanity.filter(entity => !entity.paused).forEach(entity => entity.update());\n          return;\n        }\n\n        // Add cosmetic \"suction effect\"        \n        let randDir = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.random() * 2 - 1, Math.random() * 2 - 1).normalize();\n        let randPos = randDir.dup().multiply(400);\n        let line = new _obj_Beam__WEBPACK_IMPORTED_MODULE_6__[\"default\"](this, this.player.pos.x + randPos.x, \n          this.player.pos.y + randPos.y, randDir, 0, false);\n        line.width = 20;\n        line.length = 4000;\n        line.knockback = 0;\n        line.silenced = true;\n        line.unpausable = true;\n        line.aliveTime = 60;\n        line.color = _obj_Beam__WEBPACK_IMPORTED_MODULE_6__[\"default\"].COLOR().TEAL;\n        line.cb = function () {\n          this.length *= 0.85;\n          this.width *= 0.7;\n          this.pos.subtract(randDir.multiply(1.5));\n        }\n        this.vanity.push(line);\n        \n        // if (this.loopCount % (Math.floor(SPAWN_RATE * 1.5)) === 0) {\n        if (this.loopCount % (2) === 0 && (this.fps >= MIN_FRAME_RATE - 10)) {\n          this.entities.push(_obj_factory_enemy_factory__WEBPACK_IMPORTED_MODULE_4__[\"spawnCircleRandom\"](this.player));\n        }\n        if (this.loopCount % 2 === 0) {\n          this.particles.push(new _obj_DeathExplosion__WEBPACK_IMPORTED_MODULE_11__[\"default\"](game, 40, 50, 0, \"BLACKHOLE\"));\n          // if (this.fps <= MIN_FRAME_RATE - 5) this.entities[0].alive = false;\n        }\n        this.entities.forEach(entity => {\n          let diff = _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(entity.pos, this.player.pos);\n          let distSqr = diff.dot(diff);\n\n          if (entity.r * entity.r + this.player.r * this.player.r  + 100 > distSqr) {\n            entity.alive = false;\n          } else {\n            entity.r *= 0.996;\n            // let dist = Vector.difference(this.player.pos, entity.pos);\n            // let length = Math.pow(dist.length, 2);\n            // dist = dist.normalize().multiply(length);\n            // // entity.vel.x += 1 / dist.x;\n            // // entity.vel.y += 1 / dist.y;\n          }\n        })\n        this.entities.filter(entity => !entity.alive).forEach(entity => {\n          this.vanity.push(new _obj_Explosion__WEBPACK_IMPORTED_MODULE_7__[\"default\"](game, entity.pos.x, entity.pos.y, entity.r));\n        });\n        this.entities = this.entities.filter(entity => entity.alive);\n        this.entities.forEach(entity => entity.update());\n\n        this.particles = this.particles.filter(entity => entity.alive);\n        this.particles.forEach(entity => entity.update());\n\n        this.enemyParticles = this.enemyParticles.filter(entity => entity.alive);\n        this.enemyParticles.forEach(entity => entity.update());\n\n        this.vanity = this.vanity.filter(entity => entity.alive);\n        this.vanity.forEach(entity => entity.update());\n        break;\n      default:\n        break;\n    }\n  }\n\n  // Draw player reticle at mouse position\n  drawCursor() {\n    let cursorSize = 15;\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.strokeStyle = \"black\";\n    this.ctx.lineWidth = 4;\n    this.ctx.shadowBlur = 2;\n    this.ctx.shadowColor = 'white';\n    this.ctx.moveTo(this.player.mousePos.x - cursorSize - this.player.dashCooldown / 2, this.player.mousePos.y);\n    this.ctx.lineTo(this.player.mousePos.x + cursorSize + this.player.dashCooldown / 2, this.player.mousePos.y);\n    this.ctx.moveTo(this.player.mousePos.x, this.player.mousePos.y - cursorSize - this.player.dashCooldown / 2);\n    this.ctx.lineTo(this.player.mousePos.x, this.player.mousePos.y + cursorSize + this.player.dashCooldown / 2);\n    this.ctx.stroke();\n    this.ctx.closePath();\n    this.ctx.beginPath();\n    cursorSize = 14;\n    this.ctx.shadowBlur = 0;\n    this.ctx.lineWidth = 2;\n    if (this.player.charge >= this.player.chargeMax * 2) {\n      this.ctx.strokeStyle = \"lightblue\";\n    } else if (this.player.charge >= this.player.chargeMax) {\n      this.ctx.strokeStyle = \"red\";\n    } else {\n      this.ctx.strokeStyle = \"yellow\";\n    }\n    this.ctx.moveTo(this.player.mousePos.x - cursorSize - this.player.dashCooldown / 2, this.player.mousePos.y);\n    this.ctx.lineTo(this.player.mousePos.x + cursorSize + this.player.dashCooldown / 2, this.player.mousePos.y);\n    this.ctx.moveTo(this.player.mousePos.x, this.player.mousePos.y - cursorSize - this.player.dashCooldown / 2);\n    this.ctx.lineTo(this.player.mousePos.x, this.player.mousePos.y + cursorSize + this.player.dashCooldown / 2);\n    this.ctx.stroke();\n    \n    this.ctx.font = '20px sans-serif';\n    this.ctx.fillStyle = 'white';\n\n    // === DEBUG SHOW ANGLE\n    // let angle = Math.atan2(this.player.aim.y, this.player.aim.x);\n    // this.ctx.fillText(`Angle: ${angle / Math.PI * 180}`, this.player.mousePos.x, this.player.mousePos.y);\n\n    // this.ctx.fillRect(this.player.mousePos.x + 3, this.player.mousePos.y + 3, this.player.dashCooldown, 3);\n\n    this.ctx.restore();\n  }\n\n  drawStats() {\n    this.ctx.save();\n    this.ctx.fillStyle = 'white';\n    this.ctx.font = '12px sans-serif';\n    this.ctx.shadowBlur = 2;\n    this.ctx.shadowColor = 'black';\n    let xOffset = this.cvs.width - 55;\n    let yOffset = 70;\n    this.ctx.fillText(`FPS: ${this.fps}`, xOffset, yOffset += 20);\n    this.ctx.fillText(`obj: ${this.particles.length + this.entities.length + this.vanity.length}`, xOffset, yOffset += 20);\n\n    this.ctx.restore();\n  }\n\n  drawUI() {\n    this.ctx.save();\n    this.ctx.font = '20px sans-serif';\n    this.ctx.fillStyle = 'white';\n    this.ctx.shadowBlur = 2;\n    this.ctx.shadowColor = 'black';\n    let xOffset = 10;\n    let yOffset = 2;\n\n    this.ctx.fillText(`Score: ${this.score}`, xOffset, yOffset += 20);\n    this.ctx.fillText(`Highscore: ${this.highscore}`, xOffset, yOffset += 20);\n    this.ctx.fillText(`Time: ${this.timeSeconds}`, xOffset, yOffset += 20);\n    this.ctx.fillText(`Difficulty: ${this.difficulty.toFixed(2)}`, xOffset, yOffset += 20);\n    this.ctx.restore();\n    this.drawStats();\n  }\n\n  drawVolControls() {\n    this.ctx.save();\n    if (this.mute) {\n      this.ctx.drawImage(MUTE, this.cvs.width - 83, 15, 54, 54);\n    } else {\n      this.ctx.drawImage(VOL, this.cvs.width - 80, 10);\n    }\n    this.ctx.restore();\n  }\n\n  drawHealth() {\n    this.ctx.save();\n    this.ctx.font = '20px sans-serif';\n    let xOffset = this.cvs.width / 2\n    let yOffset = this.cvs.height - 82;\n    // this.ctx.fillStyle = `rgba(${21 + ((this.player.maxHealth - this.player.health) / this.player.maxHealth) * 70},21,21)`;\n    // this.ctx.fillRect(0, 0, this.cvs.width, this.cvs.height);\n    this.ctx.fillStyle = `rgba(${50 - (this.player.health / this.player.maxHealth * 200)},${100 + this.player.health / this.player.maxHealth * 100},0)`;\n    this.ctx.fillRect(xOffset - this.player.health / 2, yOffset, this.player.health, 20);\n    this.ctx.fillStyle = 'white';\n    this.ctx.shadowBlur = 3;\n    this.ctx.shadowColor = 'black';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText(`${this.player.health}`, xOffset, yOffset + 17);\n    this.ctx.restore();\n  }\n\n  drawChargeBar() {\n    let xOffset = this.cvs.width / 2;\n\n    this.ctx.save();\n    this.ctx.textAlign = 'center';\n    if (this.player.charge >= this.player.chargeMax) {\n\n      this.ctx.fillStyle = this.loopCount % 7 === 0 ? 'white' : \"red\";\n      this.ctx.fillRect(xOffset - this.player.chargeMax * 2, this.cvs.height - 57, this.player.chargeMax * 4, 4);\n      if (this.player.beamCooldown === 0) {\n        this.ctx.font = '12px sans-serif';\n        if (this.player.chargeMax * 2 <= this.player.charge) {\n          this.ctx.fillStyle = this.loopCount % 7 === 0 ? 'white' : \"darkblue\";\n          this.ctx.font = '14px sans-serif';\n          // this.vanity.push(new SlashSpark(this, xOffset - this.player.chargeMax * 2 + (Math.random() * 2 * this.player.chargeMax) * 2, this.cvs.height - 57, -3, 1, 10));\n          this.ctx.shadowBlur = 2;\n          this.ctx.shadowColor = 'black';\n          this.ctx.fillStyle = this.loopCount % 7 === 0 ? 'darkblue' : 'yellow';\n          this.ctx.fillText(`OVERCHARGE!!`, xOffset, this.cvs.height - 40);\n        } else {\n          this.ctx.shadowBlur = 2;\n          this.ctx.shadowColor = 'black';\n          this.ctx.fillText(`READY!!`, xOffset, this.cvs.height - 40);\n        }\n      }\n      this.ctx.fillStyle = this.loopCount % 7 === 0 ? 'white' : \"darkblue\";\n      let charge = this.player.charge < this.player.chargeMax * 2 ? this.player.charge % this.player.chargeMax : this.player.chargeMax;\n      this.ctx.fillRect(xOffset - charge * 2, this.cvs.height - 59, charge * 4, 6);\n    } else {\n      this.ctx.fillStyle = \"olive\";\n      this.ctx.fillRect(xOffset - this.player.chargeMax * 2, this.cvs.height - 57, this.player.charge * 4, 4);\n      this.ctx.fillRect(xOffset - this.player.chargeMax * 2, this.cvs.height - 58, 2, 6);\n      this.ctx.fillRect(xOffset + this.player.chargeMax * 2, this.cvs.height - 58, 2, 6);\n      if (this.player.beamCooldown === 0) {\n        this.ctx.shadowBlur = 4;\n        this.ctx.shadowColor = 'black';\n\n        this.ctx.fillStyle = \"yellow\";\n        this.ctx.font = '17px sans-serif';\n        this.ctx.clearRect(xOffset - 12, this.cvs.height - 57, 24, 6);\n        this.ctx.fillText(`${this.player.charge}`, xOffset, this.cvs.height - 47);\n        this.ctx.fillStyle = \"olive\";\n        this.ctx.font = '12px sans-serif';\n        this.ctx.fillText(`/${this.player.chargeMax}`, xOffset + 20, this.cvs.height - 41);\n      }\n    }\n    if (this.player.beamCooldown > 0) {\n      this.ctx.fillStyle = this.loopCount % 5 === 0 ? 'white' : \"lightblue\";\n      this.ctx.fillRect(xOffset - this.player.beamCooldown * 2, this.cvs.height - 60, this.player.beamCooldown * 4, 8);\n      this.ctx.font = '13px sans-serif';\n      this.ctx.shadowBlur = 2;\n      this.ctx.shadowColor = 'black';\n      this.ctx.fillText(`!!! COOLDOWN !!!`, xOffset, this.cvs.height - 40);\n    }\n    this.ctx.restore();\n  }\n\n  drawFreeze() {\n    this.ctx.save();\n    this.ctx.fillStyle = `rgba(15,15,15,${this.pauseTime / 10})`;\n    this.ctx.fillRect(0, 0, this.cvs.width, this.cvs.height);\n    this.ctx.restore();\n  }\n\n  draw() {\n    // Resize canvas to window every frame\n    this.ctx.canvas.width = window.innerWidth;\n    this.ctx.canvas.height = window.innerHeight;\n\n    switch (this.state) {\n      case STATE_INIT:\n        break;\n\n      case STATE_BEGIN:\n        this.particles.forEach(entity => entity.draw());\n        // this.player.draw();\n        this.entities.forEach(entity => entity.draw());\n        this.menus.forEach(entity => entity.draw());\n        break;\n\n      case STATE_RUNNING:\n        // Handle drawing of all game objects\n        this.drawFreeze();\n        this.entities.forEach(entity => entity.draw());\n        this.particles.forEach(entity => entity.draw());\n        this.vanity.forEach(entity => entity.draw());\n        this.menus.forEach(entity => entity.draw());\n        this.drawChargeBar();\n        this.drawUI();\n        this.drawHealth();\n        this.enemyParticles.forEach(entity => entity.draw());\n        this.player.draw();\n        break;\n\n      case STATE_OVER:\n        this.drawFreeze(); \n\n        this.particles.forEach(entity => entity.draw());\n        this.entities.forEach(entity => entity.draw());\n        this.vanity.forEach(entity => entity.draw());\n        this.enemyParticles.forEach(entity => entity.draw());\n        this.player.draw();\n        this.menus.forEach(entity => entity.draw());\n        this.drawStats();\n      break;\n      default:\n        break;\n    }\n    this.drawCursor();\n    this.drawVolControls();\n  }\n\n  loop() {\n    let time = (new Date).getTime();\n    this.timeDelta = time - this.prevTime;\n    \n    if (this.timeDelta < NORMAL_TIME_DELTA * 0.90) {\n\n    } else {\n      if (this.pauseTime > 0) this.pauseTime--;\n      this.prevTime = time;\n      this.update();\n      this.draw();\n      this.fpsCount++;\n    }\n\n    if (time > this.timeTracker) {\n      this.fps = this.fpsCount;\n      this.fpsCount = 0;\n      this.timeTracker += 1000;\n      this.timeSeconds++;\n    }\n    window.requestAnimationFrame(this.loop);\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Game);\n\n//# sourceURL=webpack:///./javascript/Game.js?");

/***/ }),

/***/ "./javascript/lib/BufferLoader.js":
/*!****************************************!*\
  !*** ./javascript/lib/BufferLoader.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction BufferLoader(context, urlList, callback) {\n  this.context = context;\n  this.urlList = urlList;\n  this.onload = callback;\n  this.bufferList = new Array();\n  this.loadCount = 0;\n}\n\nBufferLoader.prototype.loadBuffer = function (url, index) {\n  // Load buffer asynchronously\n  var request = new XMLHttpRequest();\n  request.open(\"GET\", url, true);\n  request.responseType = \"arraybuffer\";\n\n  var loader = this;\n\n  request.onload = function () {\n    // Asynchronously decode the audio file data in request.response\n    loader.context.decodeAudioData(\n      request.response,\n      function (buffer) {\n        if (!buffer) {\n          alert('error decoding file data: ' + url);\n          return;\n        }\n        loader.bufferList[index] = buffer;\n        if (++loader.loadCount == loader.urlList.length)\n          loader.onload(loader.bufferList);\n      },\n      function (error) {\n        console.error('decodeAudioData error', error);\n      }\n    );\n  }\n\n  request.onerror = function () {\n    alert('BufferLoader: XHR error');\n  }\n\n  request.send();\n}\n\nBufferLoader.prototype.load = function () {\n  for (var i = 0; i < this.urlList.length; ++i)\n    this.loadBuffer(this.urlList[i], i);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (BufferLoader);\n\n//# sourceURL=webpack:///./javascript/lib/BufferLoader.js?");

/***/ }),

/***/ "./javascript/lib/Vector.js":
/*!**********************************!*\
  !*** ./javascript/lib/Vector.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\nclass Vector {\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(v) {\n    if (v instanceof Vector) {\n      this.x += v.x;\n      this.y += v.y;\n    } else {\n      this.x += v; \n      this.y += v; \n    }\n    return this;\n  }\n\n  subtract(v) {\n    if (v instanceof Vector) {\n      this.x -= v.x;\n      this.y -= v.y;\n    } else {\n      this.x -= v; \n      this.y -= v; \n    }\n    return this;\n  }\n\n  multiply(v) {\n    if (v instanceof Vector) {\n      this.x *= v.x;\n      this.y *= v.y;\n    } else {\n      this.x *= v; \n      this.y *= v; \n    }\n    return this;\n  }\n  \n  divide(v) {\n    if (v instanceof Vector) {\n      if(v.x !== 0) this.x /= v.x;\n      if(v.y !== 0) this.y /= v.y;\n    } else {\n      if(v !== 0) {\n        this.x /= v; \n        this.y /= v; \n      }\n    }\n    return this;\n  }\n\n  dup() {\n    return new Vector(this.x, this.y);\n  }\n  \n  invert() {\n    this.x *= -1;\n    this.y *= -1;\n    return this;\n  }\n\n  static difference(v1, v2) {\n    let newV = new Vector(1, 1).multiply(v1);\n    return newV.subtract(v2);\n  }\n\n  equals(v) {\n    return this.x === v.x && this.y === v.y;\n  }\n\n  dot(v) {\n    return this.x * v.x + this.y * v.y;\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  // WARNING - operation calls divide which will modify this vector\n  normalize() {\n    // let that = new Vector(this.x, this.y);\n    // return that.divide(this.length());\n    return this.divide(this.length());\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Vector);\n\n//# sourceURL=webpack:///./javascript/lib/Vector.js?");

/***/ }),

/***/ "./javascript/main.js":
/*!****************************!*\
  !*** ./javascript/main.js ***!
  \****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Game */ \"./javascript/Game.js\");\n\n\n\nwindow.addEventListener(\"DOMContentLoaded\", () => {\n  const cvs = document.getElementById('ball-popcalypse');\n  const ctx = cvs.getContext('2d');\n  const game = new _Game__WEBPACK_IMPORTED_MODULE_0__[\"default\"](cvs, ctx);\n  window.game = game;\n  \n  game.initAudio();\n  game.loop();\n});\n\n//# sourceURL=webpack:///./javascript/main.js?");

/***/ }),

/***/ "./javascript/obj/Beam.js":
/*!********************************!*\
  !*** ./javascript/obj/Beam.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EnemyCircle */ \"./javascript/obj/EnemyCircle.js\");\n/* harmony import */ var _Explosion__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Explosion */ \"./javascript/obj/Explosion.js\");\n/* harmony import */ var _Particle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Particle */ \"./javascript/obj/Particle.js\");\n/* harmony import */ var _DamageNumber__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DamageNumber */ \"./javascript/obj/DamageNumber.js\");\n/* harmony import */ var _SlashSpark__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SlashSpark */ \"./javascript/obj/SlashSpark.js\");\n/* harmony import */ var _EnemyParticle__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./EnemyParticle */ \"./javascript/obj/EnemyParticle.js\");\n\n\n\n\n\n\n\n\n\nconst WIDTH = 60;\nconst LENGTH = 150;\nconst HITBOX_RATIO = 0.95;\nconst KNOCKBACK = 10;\nconst DAMAGE = 80;\nconst DURATION = 13;\n// const COLOR = \"white\";\n\nclass Beam extends _Particle__WEBPACK_IMPORTED_MODULE_3__[\"default\"] {\n  static COLOR() {\n    return {\n      NORMAL: [255, 255, 255],\n      CRIT: [255, 165, 0],\n      CANNON: [255, 0, 0],\n      PLAYER: [13, 115, 119],\n      FADE: [230, 230, 230],\n      TEAL: [0, 205, 205],\n    }\n  }\n\n  constructor(game, startX, startY, aim, combo = 0, active = true, length = LENGTH, width = WIDTH) {\n    super(game, startX, startY);\n    this.aim = aim || this.game.player.aim.dup();\n    this.combo = combo || 0;\n\n    // Formula to get the radian angle between the Y axis and a point\n    this.angle = Math.atan2(this.aim.y, this.aim.x);\n\n    this.width = width;\n    this.length = length;\n    this.origin = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.pos.x);\n    this.damage = DAMAGE;\n    this.knockback = KNOCKBACK;\n    this.aliveTime = DURATION;\n    this.hitRatio = HITBOX_RATIO;\n    this.active = active;\n    this.initialTime = this.aliveTime;\n    this.bomb = false\n\n    this.color = Beam.COLOR().NORMAL;\n\n    // this.update = this.update.bind(this);\n    // this.draw = this.draw.bind(this);\n  }\n\n\n  checkCollision(obj) {\n    if (!obj.alive) return; //Don't check collision if object is not alive\n    if (!this.active) return;\n\n    if(!this.hitWidth) this.hitWidth = this.width * this.hitRatio;\n    if(!this.hitLength) this.hitLength = this.length * this.hitRatio;\n\n    if (obj instanceof _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__[\"default\"] || (this.bomb ? obj instanceof _EnemyParticle__WEBPACK_IMPORTED_MODULE_6__[\"default\"] : false)) {\n\n      let x = this.pos.x;\n      let y = this.pos.y;\n\n      // === Infinite linear collision detection ===\n      // let dist = Math.abs(this.aim.x * diff.y - this.aim.y * diff.x) / this.aim.length();\n      // if (this.width / 2 + obj.r > dist) {\n      // =============\n\n      // === Translate positions to unrotated box, then box collision\n      // Invert Y axis because canvas uses Y axis pointing down, and most cartesian\n      // calculations are using Y axis up\n      // --------------\n      // calculate obj's relative position to beam origin\n      // x′ = xcosθ − ysinθ      \n      // y′ = ycosθ + xsinθ\n      \n      // Get the obj relative position to beam origin pos\n      let diff = _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](obj.pos.x, -obj.pos.y), new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, -y));\n\n      let x2 = diff.x * Math.cos(this.angle) - diff.y * Math.sin(this.angle);\n      let y2 = diff.y * Math.cos(this.angle) + diff.x * Math.sin(this.angle);\n\n      // Collision using obj as a box,\n      // Use LENGTH > HIT_LENGTH to hide inaccuracy of hitbox\n      if ( \n        x2 + obj.r >= 0 &&\n        x2 - obj.r <= 0 + this.hitLength &&\n        y2 + obj.r >= 0 - this.hitWidth / 2 &&\n        y2 - obj.r <= 0 + this.hitWidth / 2\n      ) {\n        diff = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](1,0);\n        let x = diff.x * Math.cos(this.angle) - diff.y * Math.sin(this.angle);\n        let y = diff.y * Math.cos(this.angle) + diff.x * Math.sin(this.angle);\n\n        // Invert Y axis again to use diff vector for knockback\n        // diff.multiply(new Vector(1, -1));\n        // if (this.combo === -2) {\n        let knockStraight = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y);\n        // let knockStraight = this.game.player.aim.dup().normalize();\n        if (this.combo === 3) {\n          obj.vel.add(knockStraight.multiply(-this.knockback));\n        } else {\n          obj.vel.add(knockStraight.multiply(this.knockback));\n        }\n        // } else {\n        //   obj.vel.add(diff.multiply(this.knockback));\n        // }\n        obj.health -= this.damage;\n        if (obj.health <= 0) {\n          obj.alive = false;\n        } else {\n          if (!this.silenced) {\n            if (this.combo === 3) {\n              this.game.playSoundMany(`${this.game.filePath}/assets/SE_00017.wav`, 0.03);\n            } else {\n              this.game.playSoundMany(`${this.game.filePath}/assets/SE_00017.wav`, 0.08);\n            }\n          }\n        }\n        switch (this.combo) {\n          case this.game.player.maxSlashCombo:\n            this.game.vanity.push(new _DamageNumber__WEBPACK_IMPORTED_MODULE_4__[\"default\"](obj, this.damage, 11, 30, knockStraight.x));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x - 50 + Math.random() * 100, obj.pos.y - 50 + Math.random() * 100, this.combo, Math.random() * 4, 30 + Math.random() * 70));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x - 50 + Math.random() * 100, obj.pos.y - 50 + Math.random() * 100, this.combo, Math.random() * 4, 30 + Math.random() * 70));\n            break;\n          case \"BEAM\":\n            let num = new _DamageNumber__WEBPACK_IMPORTED_MODULE_4__[\"default\"](obj, this.damage, 30, 70, knockStraight.x)\n            this.game.vanity.push(num);\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x, obj.pos.y, this.combo, this.width / 200 * obj.r, obj.r * 20, 20, Math.atan2(this.aim.y, this.aim.x)));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x, obj.pos.y, 0, 2, 40));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x, obj.pos.y, 0, 3, 60));\n\n            let explosionB = new _Explosion__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.game, obj.pos.x, obj.pos.y, 30);\n            explosionB.aliveTime = 1;\n            this.game.vanity.push(explosionB);\n            break;\n          case \"FINISHER\":\n            this.game.vanity.push(new _DamageNumber__WEBPACK_IMPORTED_MODULE_4__[\"default\"](obj, this.damage, 20, 60, knockStraight.x));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x, obj.pos.y, this.combo, 15, 150, 50));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x, obj.pos.y, 0, 4, 40));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x, obj.pos.y, 0, 4, 60));\n            let explosionF = new _Explosion__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.game, obj.pos.x, obj.pos.y, 50);\n            explosionF.aliveTime = 3;\n            this.game.vanity.push(explosionF);\n\n            break;\n          default:\n            this.game.vanity.push(new _DamageNumber__WEBPACK_IMPORTED_MODULE_4__[\"default\"](obj, this.damage, 15, 50, knockStraight.x));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x, obj.pos.y, this.combo, 3, 40));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x, obj.pos.y, this.combo, 3, 40));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x, obj.pos.y, this.combo, 3, 60));\n            this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, obj.pos.x, obj.pos.y, this.combo, 7, 90, 40));\n            let explosion = new _Explosion__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.game, obj.pos.x, obj.pos.y, 30);\n            explosion.aliveTime = 3;\n            this.game.vanity.push(explosion);\n\n            break;\n        }\n      }\n    }    \n  }\n\n  drawRect() {\n    // Offset the rect based on its width but maintain origin\n    this.ctx.translate(this.pos.x + Math.sin(this.angle) * this.width / 2,\n                       this.pos.y - Math.cos(this.angle) * this.width / 2);\n    this.ctx.rotate(this.angle);\n    this.ctx.fillRect(0, 0, this.length, this.width);\n  }\n\n  update() {\n    if (!this.alive) return; //Don't check collision if object is not alive\n\n    \n    if (this.aliveTime >= this.initialTime && this.active === true) {\n      this.game.entities.forEach(entity => { this.checkCollision(entity) });\n      // this.game.freeze(5);\n      if(this.combo === \"BEAM\") {\n        this.game.enemyParticles.forEach(entity => { this.checkCollision(entity) });\n      }\n    }\n\n    if (this.aliveTime <= 0) {\n      this.alive = false;\n    }\n    this.aliveTime--;\n    this.cb();\n  }\n\n  // ctx.arc(x, y, r, sAngle, eAngle, [counterclockwise])\n  draw() {\n    if (this.aliveTime > this.initialTime - 6) {\n      this.ctx.save();\n      let color = this.color;\n      let gradient = this.ctx.createLinearGradient(0, 0, this.length, this.width);\n      gradient.addColorStop(0.0, `rgba(${color[0]},${color[1]},${color[2]},.9)`);\n      gradient.addColorStop(0.9, `rgba(${color[0]},${color[1]},${color[2]},.9)`);\n      gradient.addColorStop(0.95, `rgba(${color[0]},${color[1]},${color[2]},.1)`);\n      gradient.addColorStop(1.0, `rgba(${color[0]},${color[1]},${color[2]},0)`);\n      this.ctx.fillStyle = gradient;\n      this.ctx.fillStyle = color;\n      // this.ctx.strokeStyle = gradient;\n      // this.ctx.shadowColor = gradient;\n      // this.ctx.shadowColor = color;\n      // this.ctx.strokeStyle = \"black\";\n\n      this.drawRect();\n\n      this.ctx.restore();\n    } else {\n      this.ctx.save();\n\n      this.ctx.shadowBlur = 20;\n\n      let color = Beam.COLOR().FADE;\n      // let color = this.color;\n      let gradient = this.ctx.createLinearGradient(0, 0, this.length, this.width);\n      gradient.addColorStop(0.0, `rgba(${color[0]},${color[1]},${color[2]},${(this.aliveTime + 3) / this.initialTime * 1.5})`);\n      gradient.addColorStop(0.7, `rgba(${color[0]},${color[1]},${color[2]},${(this.aliveTime + 3) / this.initialTime * 1.5})`);\n      gradient.addColorStop(0.9, `rgba(${color[0]},${color[1]},${color[2]},${(this.aliveTime + 3) / this.initialTime * 1.2})`);\n      gradient.addColorStop(1.0, `rgba(${color[0]},${color[1]},${color[2]},0)`);\n      this.ctx.fillStyle = gradient;\n      // this.ctx.fillStyle = \"white\";\n      // this.ctx.shadowColor = gradient;\n\n      this.drawRect();\n\n      this.ctx.restore();\n\n    }\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Beam);\n\n//# sourceURL=webpack:///./javascript/obj/Beam.js?");

/***/ }),

/***/ "./javascript/obj/BeamCannon.js":
/*!**************************************!*\
  !*** ./javascript/obj/BeamCannon.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _Beam__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Beam */ \"./javascript/obj/Beam.js\");\n/* harmony import */ var _Particle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Particle */ \"./javascript/obj/Particle.js\");\n/* harmony import */ var _Explosion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Explosion */ \"./javascript/obj/Explosion.js\");\n\n\n\n\n\n\n\nconst WIDTH = 400;\nconst LENGTH = 4000;\nconst KNOCKBACK = 80;\nconst DAMAGE = 7000;\nconst DURATION = 120;\n// const COLOR = \"white\";\n\nlet particleCb = function () {\n  this.r *= 0.7;\n  this.pos = this.pos.add(this.vel);\n  this.aliveTime--;\n  if (this.aliveTime <= 0) this.alive = false;\n}\n\nclass BeamCannon extends _Beam__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  constructor(game, startX, startY, aim, length = LENGTH, width = WIDTH, dmg = DAMAGE, kb = KNOCKBACK) {\n    super(game, startX, startY, aim);\n    this.width = width;\n    this.length = length;\n    this.damage = dmg;\n    this.knockback = kb;\n    this.color = _Beam__WEBPACK_IMPORTED_MODULE_1__[\"default\"].COLOR().CANNON;\n    this.combo = \"BEAM\";\n    this.aliveTime = DURATION;\n    this.initialTime = this.aliveTime;\n    this.bomb = true;\n\n    this.cb = function () {\n      if (this.width < 4) {\n        this.width *= 0.97;\n      } else {\n        this.width *= 0.75;\n      }\n\n      if (this.aliveTime < this.initialTime - 40) {\n        let offset = Math.random();\n        let particle = new _Particle__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\n          this.game,\n          this.pos.x + this.aim.x * offset * 2000,\n          this.pos.y + this.aim.y * offset * 2000,\n          this.aim.dup().multiply(2),\n        );\n        particle.r = Math.random() * 1.5;\n        particle.aliveTime = 20;\n        particle.active = false;\n        particle.cb = particleCb;\n        particle.color = \"white\";\n        this.game.vanity.push(particle);\n      }\n    }\n    let explosion = new _Explosion__WEBPACK_IMPORTED_MODULE_3__[\"default\"](game, this.pos.x, this.pos.y);\n    explosion.aliveTime -= 16;\n    explosion.color = \"white\"; \n    explosion.r = this.width / 2;\n    game.particles.push(explosion);\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (BeamCannon);\n\n//# sourceURL=webpack:///./javascript/obj/BeamCannon.js?");

/***/ }),

/***/ "./javascript/obj/BeamSlash.js":
/*!*************************************!*\
  !*** ./javascript/obj/BeamSlash.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EnemyCircle */ \"./javascript/obj/EnemyCircle.js\");\n/* harmony import */ var _Explosion__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Explosion */ \"./javascript/obj/Explosion.js\");\n/* harmony import */ var _Particle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Particle */ \"./javascript/obj/Particle.js\");\n/* harmony import */ var _Beam__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Beam */ \"./javascript/obj/Beam.js\");\n\n\n\n\n\n\n\nconst WIDTH = 50;\nconst LENGTH = 150;\nconst KNOCKBACK = 10;\nconst DAMAGE = 300;\nconst DURATION = 7;\nconst ARC_DEGREE_RATE = 20;\nconst DERVISH_KB_RATE = 0.1;\nconst OFFSET = 15;\nconst DIRECTION = {\n  CCW: -1,\n  CW: 1,\n}\n// const COLOR = \"white\";\n\n//\n// Beam factory that creates a new Beams in an arc over a duration\n//\nclass BeamSlash extends _Particle__WEBPACK_IMPORTED_MODULE_3__[\"default\"] {\n  constructor(game, \n      combo, \n      addOffset = 0,\n      width = WIDTH,\n      length = LENGTH) {\n    super(game);\n    this.owner = this.game.player;\n    this.pos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.owner.pos.x, this.owner.pos.y);\n    this.color = _Beam__WEBPACK_IMPORTED_MODULE_4__[\"default\"].COLOR().PLAYER;\n    this.width = width;\n    this.length = length;\n    this.damage = DAMAGE;\n    this.aliveTime = DURATION;\n    this.directions = DIRECTION;\n    this.direction = DIRECTION.CW;\n    this.active = false;\n    this.arcRate = ARC_DEGREE_RATE * Math.PI / 180;\n    this.combo = combo;\n    this.knockback = KNOCKBACK;\n\n\n    switch(this.combo) {\n      case this.game.player.maxSlashCombo:\n        this.direction = DIRECTION.CCW;\n        this.arcRate = (ARC_DEGREE_RATE) * Math.PI / 180 * 0.75;\n        this.aliveTime *= 11;\n        this.length *= 0.60;\n        this.width *= 0.60;\n        this.knockback *= DERVISH_KB_RATE;\n        this.damage /= 14;\n        break;\n      case 0:\n        this.knockback *= 1.2;\n        break;\n      case \"FINISHER\":\n        this.arcRate = (ARC_DEGREE_RATE * 1.1) * Math.PI / 180; \n        this.damage = this.damage * 2.5;\n        this.color = _Beam__WEBPACK_IMPORTED_MODULE_4__[\"default\"].COLOR().CRIT;;\n        this.knockback = this.knockback * 1.4;\n        this.aliveTime += 2;\n        this.length += 60;\n        this.width += 5;\n        this.game.player.invul = 7;\n        break;\n      case 1:\n        this.direction = DIRECTION.CCW;\n        this.aliveTime += 1;\n        this.damage *= 1.2;\n        this.length *= 1.2;\n        this.width *= 1.2;\n        break;\n      case 2:\n        this.aliveTime += 1;\n        this.damage *= 1.2;\n        this.length *= 1.2;\n        this.width *= 1.2;\n        break;\n      default:\n          break;\n    }\n\n    this.startOffsetDegree = -addOffset + ARC_DEGREE_RATE * (this.aliveTime / 4);\n\n\n    this.aim = this.owner.aim;\n    let angle = this.startOffsetDegree * Math.PI / 180 * this.direction;\n    angle += this.direction * 40 * Math.PI / 180;\n    let newAim = this.aim.dup();\n    newAim.multiply(1, -1);\n\n    let x2 = newAim.x * Math.cos(angle) - newAim.y * Math.sin(angle);\n    let y2 = newAim.y * Math.cos(angle) + newAim.x * Math.sin(angle);\n    this.aim = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](-x2, -y2);\n  }\n\n  iterBeamArc() {\n    let arcRate = this.arcRate * this.direction;\n    let newAim = this.aim.dup();\n    newAim.multiply(1, -1);\n\n    let x2 = newAim.x * Math.cos(arcRate) - newAim.y * Math.sin(arcRate);\n    let y2 = newAim.y * Math.cos(arcRate) + newAim.x * Math.sin(arcRate);\n    this.aim = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x2, y2).normalize();\n\n    if (this.combo === -1) {\n      this.length += 5;\n      this.width += 5;\n    } else if (this.combo === 3) {\n      this.pos.x = this.owner.pos.x;\n      this.pos.y = this.owner.pos.y;\n      // this.length *= 0.997;\n    } else {\n      this.length -= 2;\n    }\n    let p = new _Beam__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this.game, this.pos.x + this.aim.x * OFFSET, this.pos.y + this.aim.y * OFFSET, this.aim, this.combo);\n    p.color = this.color;\n    p.length = this.length;\n    p.width = this.width;\n    p.damage = this.damage;\n    p.knockback = this.knockback;\n    this.game.particles.push(p);\n  }\n\n  checkCollision(obj) {\n    // BeamSlash does not check collision\n  }\n\n  update() {\n    if (!this.alive) return; \n\n    // this.pos.x = this.owner.pos.x;\n    // this.pos.y = this.owner.pos.y;\n\n    \n    this.iterBeamArc();\n    if (this.combo === \"FINISHER\" || this.combo === 0) {\n      this.iterBeamArc();\n      this.aliveTime--;\n    }\n    if (this.combo === this.game.player.maxSlashCombo) {\n      this.iterBeamArc();\n      this.iterBeamArc();\n      this.aliveTime--;\n    }\n\n    if (this.aliveTime <= 0) {\n      this.alive = false;\n\n      // combo finisher\n      if (this.combo === this.game.player.maxSlashCombo) {\n        this.game.playSoundMany(`${this.game.filePath}/assets/SE_00064.wav`, 0.22);\n        this.game.particles.push(new BeamSlash(this.game, \"FINISHER\", 40));\n      }\n    }\n    this.aliveTime--;\n    this.cb();\n  }\n\n  draw() {\n    // BeamSlash does not have any drawn elements\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (BeamSlash);\n\n//# sourceURL=webpack:///./javascript/obj/BeamSlash.js?");

/***/ }),

/***/ "./javascript/obj/DamageNumber.js":
/*!****************************************!*\
  !*** ./javascript/obj/DamageNumber.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _GameObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GameObject */ \"./javascript/obj/GameObject.js\");\n\n\n\n\nconst SIZE = 15;\nconst DURATION = 50;\nconst FREEZE_DURATION = 3;\nconst DEFAULT_TYPE = \"BASE\";\nconst VARIANCE = 70;\nconst GRAVITY = 0.3;\nconst MAX_SIDE_VEL = 8;\n\nconst COLOR = {\n  NORMAL: [255, 255, 255],\n  CRIT: [255, 255, 0],\n  CANNON: [0, 0, 0],\n}\n//\n// Damage Number\n//\nclass DamageNumber extends _GameObject__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  constructor(damagedObj,\n    damage,\n    size = SIZE,\n    duration = DURATION,\n    orientation = 0) {\n    super(damagedObj.game);\n    let x = damagedObj.pos.x;\n    let y = damagedObj.pos.y;\n\n    this.pos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x - VARIANCE / 2 + Math.random() * VARIANCE, y - VARIANCE / 2 + Math.random() * VARIANCE);\n    this.damage = damage;\n    this.size = size;\n    this.aliveTime = duration;\n    this.freezeTime = FREEZE_DURATION;\n    this.initialTime = this.aliveTime;\n    this.type = \"BASE\";\n    this.paused = false;\n    if (orientation > MAX_SIDE_VEL) orientation = MAX_SIDE_VEL;\n    if (orientation < -MAX_SIDE_VEL) orientation = -MAX_SIDE_VEL;\n\n\n    this.vel = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](-2 + Math.random() * 4 + orientation, -7);\n    this.cb = () => {};\n\n    switch (this.type) {\n      case \"BASE\":\n        this.color = COLOR.NORMAL;\n        break;\n      default:\n        this.color = COLOR.NORMAL;\n        break;\n    }\n  }\n\n  checkCollision(obj) {\n    // DamageNumber does not check collision\n  }\n\n  drawNum() {\n    this.ctx.save();\n    this.ctx.font = `${this.size}px sans-serif`;\n    let color;\n    // let percent = (this.aliveTime - FREEZE_DURATION) / (this.initialTime - FREEZE_DURATION);\n    // if (this.aliveTime > (DURATION - FREEZE_DURATION)) {\n    //   color = `rgba(${this.color[0]},${this.color[1]},${this.color[2]},1)`;\n    // } else {\n    //   color = `rgba(${this.color[0]},${this.color[1]},${this.color[2]},${percent})`;\n    // }\n    let percent = (this.aliveTime) / (this.initialTime);\n    color = `rgba(${this.color[0]},${this.color[1]},${this.color[2]},${percent})`;\n\n    this.ctx.fillStyle = color;\n    this.ctx.strokeStyle = color;\n    this.ctx.shadowBlur = 1;\n    this.ctx.shadowColor = \"black\";\n    this.ctx.fillText(`${Math.floor(this.damage)}`, this.pos.x, this.pos.y);\n    this.ctx.restore();\n  }\n\n  update() {\n    if (this.freezeTime >= 0) {\n      this.freezeTime--;\n    } else {\n      this.addVelocityTimeDelta();\n      this.vel.y += GRAVITY;\n    }\n\n\n    if (this.aliveTime <= 0) {\n      this.alive = false;\n    }\n    this.aliveTime--;\n\n    this.cb();\n  }\n\n  draw() {\n    this.drawNum();\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (DamageNumber);\n\n//# sourceURL=webpack:///./javascript/obj/DamageNumber.js?");

/***/ }),

/***/ "./javascript/obj/DeathExplosion.js":
/*!******************************************!*\
  !*** ./javascript/obj/DeathExplosion.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EnemyCircle */ \"./javascript/obj/EnemyCircle.js\");\n/* harmony import */ var _Explosion__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Explosion */ \"./javascript/obj/Explosion.js\");\n/* harmony import */ var _Particle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Particle */ \"./javascript/obj/Particle.js\");\n/* harmony import */ var _Beam__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Beam */ \"./javascript/obj/Beam.js\");\n\n\n\n\n\n\n\nconst WIDTH = 40;\nconst LENGTH = 50;\nconst RADIUS = 25;\nconst KNOCKBACK = 10;\nconst DURATION = 90;\nconst ARC_DEGREE_RATE = 0.8;\nconst NUM_RAYS = 12;\nconst GROWTH_RATE = 0.75;\nconst DIRECTION = {\n  CCW: -1,\n  CW: 1,\n}\n// const COLOR = \"white\";\n\n//\n// Beam factory that creates a new Beams in an arc over a duration\n//\nclass DeathExplosion extends _Particle__WEBPACK_IMPORTED_MODULE_3__[\"default\"] {\n  constructor(game,\n    width = WIDTH,\n    length = LENGTH,\n    radius = RADIUS,\n    pattern = \"BASE\",) {\n    super(game);\n    this.owner = this.game.player;\n    this.pos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.owner.pos.x, this.owner.pos.y);\n    this.color = this.owner.color;\n    this.width = width;\n    this.length = length;\n    this.radius = radius;\n    this.aliveTime = DURATION;\n    this.active = false;\n    this.arcRate = ARC_DEGREE_RATE * Math.PI / 180;\n    this.knockback = KNOCKBACK;\n    this.rays = {\n      angle: [],\n      length: [],\n      width: [],\n      dir: [],\n      offsetRate: [],\n    };\n    this.pattern = pattern;\n\n    for (let i = 0; i < NUM_RAYS; i++) {\n      let direction = Math.floor(Math.random() * 2);\n      if (direction === 0) direction = DIRECTION.CCW;\n      switch (this.pattern) {\n        case \"BLACKHOLE\":\n          this.rays.angle.push(Math.random() * 360 * Math.PI / 180);\n          this.rays.length.push(Math.random() * this.length * 22 + this.length );\n          this.rays.width.push(Math.random() * this.width * 18 / 16 + this.width / 16);\n\n          this.rays.dir.push(direction);\n          this.rays.offsetRate.push((Math.random() * this.arcRate) * this.rays.dir[i]);\n          break;\n        default:\n          this.rays.angle.push(Math.random() * 360 * Math.PI / 180);\n          this.rays.length.push(Math.random() * this.length * 15 / 16 + this.length / 16);\n          this.rays.width.push(Math.random() * this.width * 15 / 16 + this.width / 16);\n          this.rays.dir.push(direction);\n          this.rays.offsetRate.push((Math.random() * this.arcRate) * this.rays.dir[i]);\n          break;\n      }\n    }\n\n    switch (this.pattern) {\n      case \"BLACKHOLE\":\n        this.aliveTime = 50;\n        break;\n      default:\n        break;\n    }\n  }\n\n  checkCollision(obj) {\n    // DeathExplosion does not check collision\n  }\n\n  update() {\n    if (!this.alive) return;\n    if (this.aliveTime <= 0) {\n      this.alive = false;\n    }\n\n    switch(this.pattern) {\n      case \"BLACKHOLE\":\n        for (let i = 0; i < NUM_RAYS; i++) {\n          this.rays.length[i] *= 0.96;\n        }\n        break;\n      default:\n        if (this.aliveTime <= 8) {\n          this.radius *= 0.8;\n        } else {\n          this.radius += GROWTH_RATE;\n        }\n\n        if (this.aliveTime % 3 === 0) {\n          let explosion = new _Explosion__WEBPACK_IMPORTED_MODULE_2__[\"default\"](\n            game,\n            this.pos.x - 200 + Math.random() * 400,\n            this.pos.y - 200 + Math.random() * 400,\n            15 + Math.random() * 35,\n            new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, -4));\n          explosion.unpausable = true;\n          explosion.paused = false;\n          explosion.aliveTime = 9;\n          explosion.color = \"orange\";\n          this.game.vanity.push(explosion);\n        }\n\n        for (let i = 0; i < NUM_RAYS; i++) {\n          this.rays.angle[i] += this.rays.offsetRate[i];\n          this.rays.length[i] += this.rays.length[i] / 16;\n          if (this.aliveTime <= 7) {\n            this.rays.width[i] *= 1.3;\n\n          }\n        }\n        break;\n    }\n\n    this.aliveTime--;\n    this.cb();\n  }\n\n  drawRects() {\n    for (let i = 0; i < NUM_RAYS; i++) {\n      this.ctx.save();\n      let color = (this.pattern === \"BLACKHOLE\" ? [0, 0, 0] : [255, 255, 255]);\n      let gradient = this.ctx.createLinearGradient(0, 0, this.rays.length[i], this.rays.width[i]);\n      gradient.addColorStop(0, `rgba(${color[0]},${color[1]},${color[2]},.9)`);\n      gradient.addColorStop(0.8, `rgba(${color[0]},${color[1]},${color[2]},.7)`);\n      gradient.addColorStop(0.9, `rgba(${color[0]},${color[1]},${color[2]},.1)`);\n      gradient.addColorStop(1, `rgba(${color[0]},${color[1]},${color[2]},0)`);\n      this.ctx.fillStyle = gradient;\n\n\n      this.ctx.translate(this.pos.x + Math.sin(this.rays.angle[i]) * this.rays.width[i] / 2,\n        this.pos.y - Math.cos(this.rays.angle[i]) * this.rays.width[i] / 2);\n      this.ctx.rotate(this.rays.angle[i]);\n      this.ctx.fillRect(0, 0, this.rays.length[i], this.rays.width[i]);\n      this.ctx.restore();\n    }\n  }\n\n  draw() {\n    this.drawRects();\n    if(this.pattern === \"BASE\") {\n      this.ctx.save();\n      this.ctx.beginPath();\n      this.ctx.arc(this.pos.x, this.pos.y, this.radius, 0, 2 * Math.PI);\n      this.ctx.fillStyle = \"white\";\n      this.ctx.strokeStyle = \"white\";\n\n      this.ctx.shadowBlur = 6;\n      this.ctx.shadowColor = \"white\";\n\n      this.ctx.fill();\n      this.ctx.stroke();\n      this.ctx.closePath();\n\n      this.ctx.restore();\n    }\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (DeathExplosion);\n\n//# sourceURL=webpack:///./javascript/obj/DeathExplosion.js?");

/***/ }),

/***/ "./javascript/obj/EnemyCircle.js":
/*!***************************************!*\
  !*** ./javascript/obj/EnemyCircle.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _Player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Player */ \"./javascript/obj/Player.js\");\n/* harmony import */ var _GameObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameObject */ \"./javascript/obj/GameObject.js\");\n/* harmony import */ var _Explosion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Explosion */ \"./javascript/obj/Explosion.js\");\n\n\n\n\n\n\nconst RADIUS = 7;\nconst COLOR = \"#a64942\";\nconst KNOCKBACK = 10;\nconst ENEMY_KNOCKBACK_MULTIPLIER = 2.5;\nconst DAMPENING_COEFFICIENT = 0.7;\nconst SPREAD_FACTOR = 2.0;\nconst HEALTH = 100;\nconst HEALTH_CAP = 200;\nconst DAMAGE = 1;\nconst SCORE = 1;\nconst BASE_TURN_RATE = 0.25;\nconst ACCEL = 0.4;\nconst MAX_SPEED = 3;\n\nclass EnemyCircle extends _GameObject__WEBPACK_IMPORTED_MODULE_2__[\"default\"] {\n  constructor(game) {\n    super(game);\n    this.aiCallback = () => {\n      this.aim = _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(game.player.pos, this.pos).normalize();\n      let turnRate = BASE_TURN_RATE + Math.pow(game.difficulty, 1 / 2);\n      this.aim.multiply(turnRate).add(this.vel).normalize();\n\n      this.vel.add(this.aim.multiply(this.accel));\n    };\n\n    this.health = HEALTH + game.difficulty * 2;\n\n    this.accel = ACCEL + Math.random() * Math.pow(game.difficulty, 1 / 2);\n    this.maxSpeed = MAX_SPEED;\n\n    if (this.health > HEALTH_CAP) this.health = HEALTH_CAP;\n\n    this.r = RADIUS;\n    this.color = COLOR;\n    this.damage = DAMAGE;\n    this.score = SCORE;\n\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n  }\n\n  dampSpeed() {\n    let vel = this.vel.length();\n    if (vel > MAX_SPEED) {\n      this.vel.multiply(DAMPENING_COEFFICIENT);\n    }\n  }\n\n  // Check if enemies collide with the player\n  checkAndHitPlayer(player) {\n    if (player.noclip > 0) return;\n    let diff = _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(this.pos, player.pos);\n    let distSqr = diff.dot(diff);\n\n    // if (player.moveState === \"STATE_DASHING\") return;\n    if (this.r * this.r + player.r * player.r > distSqr) {\n      this.game.playSoundMany(`${this.game.filePath}/assets/impact.wav`, 0.3);\n      let explosion = new _Explosion__WEBPACK_IMPORTED_MODULE_3__[\"default\"](game, player.pos.x + diff.x / 2, player.pos.y + diff.y / 2, this.r * 2);\n      explosion.color = 'red';\n      explosion.aliveTime = 5;\n\n      diff.normalize();\n      diff.multiply(KNOCKBACK);\n      player.vel.subtract(diff.dup().multiply(this.r / RADIUS));\n      this.vel.add(diff.multiply(ENEMY_KNOCKBACK_MULTIPLIER));\n\n      if (player.invul > 0) {\n        explosion.color = 'lightblue';\n      } else {\n        player.health -= this.damage;\n        player.charge += this.damage;\n        if (this.r >= 50) player.invul = 45;\n      }\n      player.game.vanity.push(explosion);\n    }\n  }\n\n  // Check if enemies are colliding and push them away\n  checkAndSpreadEnemy(obj) {\n    // Don't collide objects that are standing directly on each other\n    if (obj.pos.equals(this.pos)) return;\n\n    let diff = _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(this.pos, obj.pos);\n    let distSqr = diff.dot(diff);\n\n    if (this.r * this.r + obj.r * obj.r > distSqr) {\n      diff.normalize();\n      diff.multiply(SPREAD_FACTOR);\n      obj.vel.subtract(diff.dup().multiply(this.r / RADIUS));\n      this.vel.add(diff.dup().multiply(RADIUS / this.r));\n    }\n  }\n\n  checkCollision(obj) {\n    if (!obj.alive) return;\n\n    if(obj instanceof _Player__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n      this.checkAndHitPlayer(obj);\n    } else if (obj instanceof EnemyCircle) {\n      this.checkAndSpreadEnemy(obj);\n    }\n  }\n\n  update() {\n    if (!this.alive) return;\n    this.aiCallback();\n\n    this.dampSpeed();\n    this.addVelocityTimeDelta();\n// this.validatePosition(this.cvs.width, this.cvs.height);\n\n    // Check collision with player\n    this.checkCollision(this.game.players[0]);\n\n    // Many-many collision is very heavy - please refactor at some point or implement quadtree\n    this.game.entities.forEach(entity => this.checkCollision(entity));\n  }\n\n  // ctx.arc(x, y, r, sAngle, eAngle, [counterclockwise])\n  draw() {\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);\n    this.ctx.fillStyle = this.color;\n    this.ctx.strokeStyle = 'black';\n    this.ctx.fill();\n    this.ctx.stroke();\n    this.ctx.closePath();\n    this.ctx.restore();\n\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (EnemyCircle);\n\n//# sourceURL=webpack:///./javascript/obj/EnemyCircle.js?");

/***/ }),

/***/ "./javascript/obj/EnemyParticle.js":
/*!*****************************************!*\
  !*** ./javascript/obj/EnemyParticle.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EnemyCircle */ \"./javascript/obj/EnemyCircle.js\");\n/* harmony import */ var _GameObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameObject */ \"./javascript/obj/GameObject.js\");\n/* harmony import */ var _DamageNumber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DamageNumber */ \"./javascript/obj/DamageNumber.js\");\n/* harmony import */ var _Particle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Particle */ \"./javascript/obj/Particle.js\");\n/* harmony import */ var _Explosion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Explosion */ \"./javascript/obj/Explosion.js\");\n\n\n\n\n\n\n\nconst RADIUS = 10;\nconst KNOCKBACK = 30;\nconst DAMAGE = 10;\nconst COLOR = \"#ff6229\";\nconst VELOCITY = 6;\nconst SCORE = 1;\nconst HITBOX_RATIO = 0.9;\n\nclass EnemyParticle extends _Particle__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\n  constructor(\n    game,\n    startX = 0,\n    startY = 0,\n    vel = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0, 0),\n    cb = () => { }\n  ) {\n    super(game);\n    this.pos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](startX, startY);\n    this.vel = vel || VELOCITY;\n    this.r = RADIUS;\n    this.color = COLOR;\n    this.damage = DAMAGE;\n    this.knockback = KNOCKBACK;\n    this.cb = cb;\n    this.aliveTime = 1;\n    this.active = true;\n    this.target = this.game.player;\n    this.score = SCORE;\n    this.health = 1;\n\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n  }\n\n  checkAndHitPlayer(player) {\n    let diff = _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(this.pos, player.pos);\n    let distSqr = diff.dot(diff);\n\n    // if (player.moveState === \"STATE_DASHING\") return;\n    if (this.r * this.r + player.r * player.r > distSqr * HITBOX_RATIO) {\n      if(player.alive) this.game.playSoundMany(`${this.game.filePath}/assets/impact.wav`, 0.3);\n      let explosion = new _Explosion__WEBPACK_IMPORTED_MODULE_5__[\"default\"](game, player.pos.x + diff.x / 2, player.pos.y + diff.y / 2, this.r * 2);\n      explosion.color = 'red';\n      explosion.aliveTime = 5;\n\n      let kb = this.vel.dup().normalize();\n      kb.multiply(this.knockback);\n      player.vel.add(kb);\n\n      if (player.invul > 0) {\n        explosion.color = 'lightblue';\n      } else {\n        player.health -= this.damage;\n        player.charge += this.damage;\n        if (this.r > RADIUS) player.invul = 45;\n      }\n      this.alive = false;\n      player.game.vanity.push(explosion);\n    }\n  }\n\n  update() {\n    if (!this.alive) return; //Don't check collision if object is not alive\n    this.cb();\n    if (!this.active) return;\n    this.addVelocityTimeDelta();\n    this.checkAndHitPlayer(this.target);\n    this.validatePosition(this.cvs.width, this.cvs.height);\n  }\n\n  // ctx.arc(x, y, r, sAngle, eAngle, [counterclockwise])\n  draw() {\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);\n    this.ctx.shadowBlur = 7;\n    this.ctx.shadowColor = \"red\";\n    this.ctx.fillStyle = this.color;\n    this.ctx.fill();\n    this.ctx.strokeStyle = \"red\";\n    this.ctx.stroke();\n\n    this.ctx.closePath();\n    this.ctx.restore();\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (EnemyParticle);\n\n//# sourceURL=webpack:///./javascript/obj/EnemyParticle.js?");

/***/ }),

/***/ "./javascript/obj/Explosion.js":
/*!*************************************!*\
  !*** ./javascript/obj/Explosion.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EnemyCircle */ \"./javascript/obj/EnemyCircle.js\");\n/* harmony import */ var _Particle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Particle */ \"./javascript/obj/Particle.js\");\n\n\n\n\nconst RADIUS = 5;\nconst COLOR = \"white\";\n\nclass Explosion extends _Particle__WEBPACK_IMPORTED_MODULE_2__[\"default\"] {\n  constructor(game, startX, startY, startR, vel) {\n    super(game);\n    this.pos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](startX, startY);\n    this.vel = vel || new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    this.r = startR || RADIUS;\n    this.color = COLOR;\n    this.aliveTime = 20;\n    this.initialAliveTime = this.aliveTime;\n\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n  }\n\n  update() {\n    if (!this.alive) return; //Don't check collision if object is not alive\n\n    this.pos.add(this.vel);\n    if (this.aliveTime <= 0) {\n      this.alive = false;\n    }\n    this.aliveTime--;\n\n    if (this.aliveTime <= 5) {\n      this.r *= 1.11;\n    }\n  }\n\n  // ctx.arc(x, y, r, sAngle, eAngle, [counterclockwise])\n  draw() {\n    if (this.aliveTime > 5) {\n      this.ctx.save();\n\n      this.ctx.beginPath();\n      this.ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);\n      this.ctx.fillStyle = this.color;\n      this.ctx.strokeStyle = this.color;\n      this.ctx.fill();\n      this.ctx.stroke();\n      this.ctx.closePath();\n      this.ctx.restore();\n\n\n    } else {\n      this.ctx.save();\n\n      this.ctx.beginPath();\n      this.ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);\n      this.ctx.fillStyle = \"rgba(0,0,0,0)\";\n      this.ctx.fill();\n      this.ctx.strokeStyle = this.color;\n     \n      this.ctx.shadowBlur = 30;\n      this.ctx.shadowColor =  this.color;\n      this.ctx.stroke();  \n\n      this.ctx.restore();    \n    }\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Explosion);\n\n//# sourceURL=webpack:///./javascript/obj/Explosion.js?");

/***/ }),

/***/ "./javascript/obj/GameObject.js":
/*!**************************************!*\
  !*** ./javascript/obj/GameObject.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n\n\n\nconst COLOR = 'black';\nconst RADIUS = 3;\nconst MAX_HEALTH = 100;\n\n\n// May be inefficient to create new position vectors all the time\nclass GameObject {\n  constructor(game) {\n    this.game = game;\n    this.cvs = game.cvs;\n    this.ctx = game.ctx;\n    this.pos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    this.vel = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    this.aim = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    this.alive = true;\n    this.pauseTime = 0;\n    this.paused = true;\n    this.unpausable = false;\n    this.silenced = false;\n\n    this.maxHealth = MAX_HEALTH;\n    this.health = MAX_HEALTH;\n\n    this.radius = RADIUS;\n    this.color = COLOR;\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n  }\n\n  // Ensure objects do not leave the boundaries defined here.\n  validateBound(rectX, rectY) {\n    if (this.pos.x + this.r > rectX) this.pos.x = rectX - this.r;\n    if (this.pos.y + this.r > rectY) this.pos.y = rectY - this.r;\n    if (this.pos.x - this.r < 0) this.pos.x = this.r;\n    if (this.pos.y - this.r < 0) this.pos.y = this.r;\n  }\n\n  update() {\n  }\n\n  // ctx.arc(x, y, r, sAngle, eAngle, [counterclockwise])\n  draw() {\n  }\n  // Multiply velocity by the fractional difference in timeDelta\n  // Does not skip frames, but gives the illusion of same speed\n  addVelocityTimeDelta() {\n    this.pos.add(this.vel.dup().multiply(this.game.timeDelta / this.game.normalTimeDelta));\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GameObject);\n\n//# sourceURL=webpack:///./javascript/obj/GameObject.js?");

/***/ }),

/***/ "./javascript/obj/LargeEnemyCircle.js":
/*!********************************************!*\
  !*** ./javascript/obj/LargeEnemyCircle.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _Player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Player */ \"./javascript/obj/Player.js\");\n/* harmony import */ var _GameObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameObject */ \"./javascript/obj/GameObject.js\");\n/* harmony import */ var _Explosion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Explosion */ \"./javascript/obj/Explosion.js\");\n/* harmony import */ var _EnemyCircle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EnemyCircle */ \"./javascript/obj/EnemyCircle.js\");\n/* harmony import */ var _behavior_FollowPlayerAI__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./behavior/FollowPlayerAI */ \"./javascript/obj/behavior/FollowPlayerAI.js\");\n\n\n\n\n\n\n\n\nconst COLOR = \"#a64942\";\nconst HEALTH = 6000;\nconst HEALTH_CAP = 18000;\n\nconst BASE_TURN_RATE = 0.25;\nconst ACCEL = 0.4;\nconst MAX_SPEED = 1.3;\nconst DAMAGE = 40;\n\nclass LargeEnemyCircle extends _EnemyCircle__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\n  constructor(game) {\n    super(game);\n    this.aiCallback = () => {\n      this.aim = _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(game.player.pos, this.pos).normalize();\n      let turnRate = BASE_TURN_RATE + Math.pow(game.difficulty, 1 / 2);\n      this.aim.multiply(turnRate).add(this.vel).normalize();\n\n      this.vel.add(this.aim.multiply(this.accel));\n    };\n\n    this.r = Math.floor(50 + Math.random() * 50);\n    if (this.game.state === \"STATE_OVER\") this.r *= 1 + Math.random() * 4;\n\n    if (Math.floor(Math.random() * 5) % 3 === 0) {\n      this.accel = ACCEL + Math.random() * Math.pow(this.game.difficulty, 1 / 2);\n      this.maxSpeed = MAX_SPEED + Math.random() * Math.pow(this.game.difficulty, 1 / 2);\n    } else {\n      this.accel = ACCEL / 2;\n      this.maxSpeed = MAX_SPEED / 2;\n    }\n\n    this.health = HEALTH + this.r * 150;\n\n    if (this.health > HEALTH_CAP) this.health = HEALTH_CAP;\n\n    this.color = COLOR;\n    this.damage = DAMAGE;\n    this.score = this.r * 2;\n\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (LargeEnemyCircle);\n\n//# sourceURL=webpack:///./javascript/obj/LargeEnemyCircle.js?");

/***/ }),

/***/ "./javascript/obj/Particle.js":
/*!************************************!*\
  !*** ./javascript/obj/Particle.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EnemyCircle */ \"./javascript/obj/EnemyCircle.js\");\n/* harmony import */ var _GameObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameObject */ \"./javascript/obj/GameObject.js\");\n/* harmony import */ var _DamageNumber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DamageNumber */ \"./javascript/obj/DamageNumber.js\");\n/* harmony import */ var _Slam__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Slam */ \"./javascript/obj/Slam.js\");\n\n\n\n\n\n\nconst RADIUS = 4;\nconst KNOCKBACK = 10;\nconst DAMAGE = 37;\nconst COLOR = \"#14ffec\";\nconst VELOCITY = 10;\n\nclass Particle extends _GameObject__WEBPACK_IMPORTED_MODULE_2__[\"default\"] {\n  constructor(\n    game, \n    startX = 0, \n    startY = 0, \n    vel = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0,0), \n    cb = () => {} \n  ) {\n    super(game);\n    this.pos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](startX, startY);\n    this.vel = vel || VELOCITY;\n    this.r = RADIUS;\n    this.color = COLOR;\n    this.damage = DAMAGE;\n    this.knockback = KNOCKBACK;\n    this.cb = cb;\n    this.aliveTime = 1;\n    this.active = true;\n\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n  }\n\n  validatePosition(rectX, rectY) {\n    if ( this.pos.x > rectX + this.r \n      || this.pos.x < 0 - this.r \n      || this.pos.y > rectY + this.r \n      || this.pos.y < 0 - this.r ) { \n        this.alive = false;\n      };\n  }\n\n  checkCollision (obj) {\n    if (!obj.alive) return; //Don't check collision if object is not alive\n\n    let diff = _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(this.pos, obj.pos);\n    let distSqr = diff.dot(diff);\n    if (obj instanceof _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n      if (this.r * this.r + obj.r * obj.r > distSqr) {\n        this.alive = false;\n        let kb = this.vel.dup();\n        kb.normalize();\n        kb.multiply(this.knockback / Math.pow(obj.r / 6, 2));\n        obj.vel.add(kb);\n        obj.health -= this.damage;\n        \n        if (obj.health <= 0) {\n          obj.alive = false;\n          kb.normalize();\n          kb.multiply(this.knockback / 2);\n          obj.vel.add(kb);\n        }\n\n        this.game.vanity.push(new _DamageNumber__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this, this.damage, 11, 30, this.vel.x));\n        let hitspark = new _Slam__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this.game, this.pos.x, this.pos.y);\n        hitspark.aliveTime = 4;\n        hitspark.growthRate = 1;\n        hitspark.r = 1;\n        hitspark.damage = 0;\n        this.game.vanity.push(hitspark);\n      }\n    }\n  }\n\n  update() {\n    if (!this.alive) return; //Don't check collision if object is not alive\n    this.cb();\n    if(!this.active) return;\n    this.addVelocityTimeDelta();\n    this.game.entities.forEach(entity => { this.checkCollision(entity) });\n    this.validatePosition(this.cvs.width, this.cvs.height);\n  }\n\n  // ctx.arc(x, y, r, sAngle, eAngle, [counterclockwise])\n  draw() {\n    if (!this.alive) return;\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);\n    this.ctx.fillStyle = this.color;\n    this.ctx.fill();\n    // this.ctx.strokeStyle = this.color;\n    // this.ctx.stroke();\n\n    this.ctx.closePath();\n    this.ctx.restore();\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Particle);\n\n//# sourceURL=webpack:///./javascript/obj/Particle.js?");

/***/ }),

/***/ "./javascript/obj/Player.js":
/*!**********************************!*\
  !*** ./javascript/obj/Player.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _GameObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GameObject */ \"./javascript/obj/GameObject.js\");\n/* harmony import */ var _factory_enemy_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./factory/enemy_factory */ \"./javascript/obj/factory/enemy_factory.js\");\n/* harmony import */ var _factory_particle_factory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./factory/particle_factory */ \"./javascript/obj/factory/particle_factory.js\");\n/* harmony import */ var _Slam__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Slam */ \"./javascript/obj/Slam.js\");\n/* harmony import */ var _BeamSlash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./BeamSlash */ \"./javascript/obj/BeamSlash.js\");\n/* harmony import */ var _Beam__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Beam */ \"./javascript/obj/Beam.js\");\n/* harmony import */ var _Explosion__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Explosion */ \"./javascript/obj/Explosion.js\");\n/* harmony import */ var _Particle__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Particle */ \"./javascript/obj/Particle.js\");\n/* harmony import */ var _SlashSpark__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./SlashSpark */ \"./javascript/obj/SlashSpark.js\");\n/* harmony import */ var _DeathExplosion__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./DeathExplosion */ \"./javascript/obj/DeathExplosion.js\");\n/* harmony import */ var _BeamCannon__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./BeamCannon */ \"./javascript/obj/BeamCannon.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import shotSfx from '../assets/laser7.wav';\n\nconst CLAMP_SPAWN = 100; // Offset from edges\nconst MAX_SPEED = 7;\nconst MIN_SPEED = 0.1;\nconst ACCEL = 3;\nconst DECEL = 0.9;\nconst SPRINT_SPEED = 8;\nconst MAX_SPRINT_SPEED = 10;\nconst DASH_TIME = 0;\nconst DASH_SPEED = 7;\nconst DASH_COOLDOWN = 12;\nconst POST_DASH_INVUL = 2;\nconst CHARGE_MAX = 60;\nconst CHARGE_STACKS = 2.2;\nconst CHARGE_COOLDOWN = 90;\nconst MAX_COMBOS = 3;\nconst SHOOT_COOLDOWN = 12;\nconst SHOOT_SHOTGUN_PELLETS = 60;\n\nconst PLAYER_RADIUS = 11;\nconst COLOR = '#0d7377';\nconst DAMPENING_COEFFICIENT = 0.7;\nconst CLAMP_SPEED = 200;\n\n\nconst STATE_WALKING = \"STATE_WALKING\";\nconst STATE_DASHING = \"STATE_DASHING\";\n\nconst KEY = {\n  W: 87,\n  A: 65,\n  S: 83,\n  D: 68,\n  R: 82,\n  ENTER: 13,\n  UP: 38,\n  // LEFT: 37,\n  DOWN: 40,\n  // RIGHT: 39,\n  SHIFT: 16,\n  SPACE: 32,\n  MOUSE_LEFT: 10000,\n  MOUSE_RIGHT: 10002,\n};\n\nconst MOUSE = {\n  LEFT: 0,\n  MIDDLE: 1,\n  RIGHT: 2,\n}\n\nclass Player extends _GameObject__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  constructor(game) {\n    super(game);\n    \n    this.pos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](CLAMP_SPAWN + Math.random() * (this.cvs.width - CLAMP_SPAWN * 2),\n                          CLAMP_SPAWN + Math.random() * (this.cvs.height - CLAMP_SPAWN * 2));\n    this.vel = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](); \n    this.aim = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    this.mousePos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.cvs.width / 2, this.cvs.height / 2);\n    this.shootCooldown = 0;\n    this.shooting = false;\n    this.slashReset = 0;\n    this.slashCombo = 0;\n    this.maxSlashCombo = MAX_COMBOS;\n    this.moveState = STATE_WALKING;\n    this.dashDuration = 0;\n    this.dashDirection = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    this.dashCooldown = 0;\n    this.beamCooldown = 0;\n    this.charging = false;\n    this.invul = 0;\n    this.noclip = 0;\n    this.velRestoreDash = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](); \n    this.charge = CHARGE_MAX;\n    this.chargeMax = CHARGE_MAX;\n\n    this.maxHealth = 100;\n    this.health = this.maxHealth;\n\n    this.r = PLAYER_RADIUS;\n    this.color = COLOR;\n    this.keyDown = {\n      [KEY.W]: false,\n      [KEY.A]: false,\n      [KEY.S]: false,\n      [KEY.D]: false,\n      [KEY.R]: false,\n      [KEY.SHIFT]: false,\n      [KEY.SPACE]: false,\n      [KEY.MOUSE_LEFT]: false,\n      [KEY.MOUSE_RIGHT]: false,\n    }\n\n    this.setMousePosition = this.setMousePosition.bind(this);\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n  }\n\n  // Store mouse position relative to canvas origin\n  setMousePosition(e) {\n    var canvasRect = this.cvs.getBoundingClientRect();\n    this.mousePos.x = e.clientX - canvasRect.left;\n    this.mousePos.y = e.clientY - canvasRect.top;\n    this.setAim();\n  }\n\n  // Set player's unnormalized aim relative to stored mouse position\n  setAim() {\n    this.aim = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.mousePos.x - this.pos.x, this.mousePos.y - this.pos.y);\n  }\n\n  // Dash in a direction for a few frames\n  // End dash logic is handled in update\n  dash() {\n    if (this.moveState !== STATE_DASHING) {\n      this.moveState = STATE_DASHING;\n      // this.pauseTime = 3;\n      this.invul = 5;\n\n      this.setAim();\n      // this.vel = this.aim.dup().normalize().multiply(DASH_SPEED * 2);\n      // this.velRestoreDash = this.vel.dup();\n      this.dashDirection = this.aim.dup();\n      this.dashDuration = DASH_TIME;\n      this.game.playSoundMany(`${this.game.filePath}/assets/SE_00064.wav`, 0.13);\n    }\n  }\n\n  fireBeam() {\n    if (this.charge >= CHARGE_MAX) {\n      let freezeTime = 18;\n      this.charge -= CHARGE_MAX;\n      this.beamCooldown = !this.game.cheat ? CHARGE_COOLDOWN : 2;\n      this.charging = true;\n\n      setTimeout(function () {\n        this.charging = false;\n\n        let kb = this.aim.dup().normalize().multiply(-75);\n        this.vel.add(kb);\n        let aim = kb.dup().normalize().multiply(-1);\n\n        this.game.playSoundMany(`${this.game.filePath}/assets/SE_00016.wav`, 0.2);\n        let beam = new _BeamCannon__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.game, this.pos.x, this.pos.y, aim);\n\n        this.invul = 5;\n        this.game.delayedParticles.push(beam);\n        \n        \n        if (this.game.cheat) {\n          beam.width = 60;\n          beam.damage = 600;\n          this.vel.subtract(kb.multiply(0.9));\n          freezeTime = 0;\n          beam.knockback = 5;\n          beam.pos.x += Math.random() * 120 - 60;\n          beam.pos.y += Math.random() * 120 - 60;\n          // beam = new BeamCannon(this.game, beam.pos.x, beam.pos.y, aim);          \n          return;\n        };\n\n        this.game.freeze(freezeTime);\n\n        let sparkCB = function () {\n          this.length *= 0.70;\n          this.width *= 0.70;\n        }\n\n        let baseAngle = Math.floor(Math.random() * 360) * Math.PI / 180;\n        let spark1 = new _SlashSpark__WEBPACK_IMPORTED_MODULE_9__[\"default\"](this.game, this.pos.x, this.pos.y, 0, 70, 2000, 30, baseAngle, Math.PI / 20, false);\n        let spark2 = new _SlashSpark__WEBPACK_IMPORTED_MODULE_9__[\"default\"](this.game, this.pos.x, this.pos.y, 0, 70, 2000, 30, baseAngle + Math.PI / 2, Math.PI / 20, false);\n        spark1.cb = sparkCB;\n        spark2.cb = sparkCB;\n        this.game.vanity.push(spark1);\n        this.game.vanity.push(spark2);\n\n        let explosion1 = new _Explosion__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.game, this.pos.x, this.pos.y, 100);\n        explosion1.aliveTime = 7;\n        explosion1.color = \"rgba(255,255,255,.1)\";\n        this.game.vanity.push(explosion1);\n\n        let explosion2 = new _Explosion__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.game, this.pos.x, this.pos.y, 150);\n        explosion2.aliveTime = 5;\n        this.game.vanity.push(explosion2);\n\n        let explosion3 = new _Explosion__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.game, this.pos.x, this.pos.y, 100);\n        explosion3.color = \"rgba(255,0,0,.3)\";\n        explosion3.aliveTime = 7;\n        this.game.vanity.push(explosion3);\n\n      }.bind(this), 200);\n\n      setTimeout(function() {\n        this.game.playSoundMany(`${this.game.filePath}/assets/SE_00049.wav`, 0.2);\n      }, 300 + this.game.normalTimeDelta * freezeTime);\n    }\n  }\n\n  // Fire\n  shoot() {\n    if (this.shooting === false) {\n      this.game.playSoundMany(`${this.game.filePath}/assets/laser7.wav`, 0.4);\n      this.shooting = true;\n      this.shootCooldown = SHOOT_COOLDOWN;\n      // for (let i = 0; i < SHOOT_SHOTGUN_PELLETS; i++) {\n      //   fireBulletAtCursorB(this); \n      // }\n      let beam = new _BeamCannon__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this.game, this.pos.x, this.pos.y, this.aim, 4000, 50, 200, 10);\n      beam.hitRatio = 0.5;\n      beam.bomb = false;\n      beam.aliveTime = 40;\n      beam.initialTime = beam.aliveTime;\n      beam.color = _Beam__WEBPACK_IMPORTED_MODULE_6__[\"default\"].COLOR().TEAL;\n      this.game.particles.push(beam);\n    } else {\n      if (this.game.loopCount % 5 === 0) {\n        this.game.playSoundMany(`${this.game.filePath}/assets/laser7.wav`, 0.2);\n      }\n      Object(_factory_particle_factory__WEBPACK_IMPORTED_MODULE_3__[\"fireBulletAtCursor\"])(this);\n      Object(_factory_particle_factory__WEBPACK_IMPORTED_MODULE_3__[\"fireBulletAtCursor\"])(this);\n      Object(_factory_particle_factory__WEBPACK_IMPORTED_MODULE_3__[\"fireBulletAtCursor\"])(this);\n      Object(_factory_particle_factory__WEBPACK_IMPORTED_MODULE_3__[\"fireBulletAtCursor\"])(this);\n    }\n  }\n\n\n  mountController() {\n    document.addEventListener('keydown', (e) => {\n      let key = e.keyCode;\n      if(key === 8) this.health = 0; // BACKSPACE\n      if(key === 187) this.game.difficulty++; //EQUAL\n      if(key === 189) this.health += 100; //MINUS\n      if(key === 48) { //0\n        this.game.cheat = true;\n      }\n    \n      // Ignore keys that have not been bound\n      if (!Object.values(KEY).includes(key)) return;\n      switch (this.game.state) {\n        case this.game.STATE_INIT:\n          break;\n        case this.game.STATE_BEGIN:\n          if (key !== KEY.ENTER && key !== KEY.SPACE) { \n            this.keyDown[key] = true;\n            this.game.startGame();\n          }\n          break;\n        case this.game.STATE_RUNNING:\n          this.keyDown[key] = true;\n          if (key == KEY.DOWN) this.game.entities.push(_factory_enemy_factory__WEBPACK_IMPORTED_MODULE_2__[\"spawnCircleRandom\"](this));\n          if (key == KEY.UP) this.charge += CHARGE_MAX;\n          break;\n        case this.game.STATE_OVER:\n          if (key === KEY.ENTER) this.game.restartGame();\n          break;\n        default:\n          break;\n      }\n    });\n\n    document.addEventListener('keyup', (e) => {\n      let key = e.keyCode;\n      if (!Object.values(KEY).includes(key)) return;\n      switch (this.game.state) {\n        case this.game.STATE_INIT:\n          break;\n        case this.game.STATE_BEGIN:\n          break;\n        case this.game.STATE_RUNNING:\n          this.keyDown[key] = false;\n          break;\n        case this.game.STATE_OVER:\n          break;\n        default:\n          break;\n      }\n    });\n\n    document.onmousemove = (e) => {\n      this.setMousePosition(e);\n    };\n\n    // Disable right click context menu\n    document.addEventListener(\"contextmenu\", (e) => { \n      e.preventDefault();\n      return false;\n    });\n\n    document.addEventListener(\"mousedown\", (e) => {\n      e.preventDefault();\n      let clickType = e.button;\n\n      // If the player's mouse is over the audio icon, toggle audio\n      if (\n        this.mousePos.x >= this.cvs.width - 100 &&\n        this.mousePos.x <= this.cvs.width &&\n        this.mousePos.y >= 0 &&\n        this.mousePos.y <= 100) {\n        this.game.mute = !this.game.mute;\n        this.game.mute ? this.game.bgm.pause() : this.game.bgm.play();\n        return;\n      }\n\n      switch (this.game.state) {\n        case this.game.STATE_INIT:\n          break;\n        case this.game.STATE_BEGIN:\n          if (\n            this.mousePos.x >= 0 &&\n            this.mousePos.x <= 100 &&\n            this.mousePos.y >= 0 &&\n            this.mousePos.y <= 100) {\n              window.location.href = \"https://www.linkedin.com/in/cdnguyen714/\";\n              return;\n          }\n          this.game.startGame();\n          if (clickType === MOUSE.LEFT) this.keyDown[KEY.MOUSE_LEFT] = true;\n          if (clickType === MOUSE.RIGHT) this.keyDown[KEY.MOUSE_RIGHT] = true;\n          break;\n        case this.game.STATE_RUNNING:\n          if (clickType === MOUSE.LEFT) this.keyDown[KEY.MOUSE_LEFT] = true;\n          if (clickType === MOUSE.RIGHT) this.keyDown[KEY.MOUSE_RIGHT] = true;\n          break;\n        case this.game.STATE_OVER:\n          break;\n        default:\n          break;\n      }\n    });\n\n    document.addEventListener(\"mouseup\", (e) => {\n      e.preventDefault();\n      let clickType = e.button;\n\n      switch (this.game.state) {\n        case this.game.STATE_INIT:\n          break;\n        case this.game.STATE_BEGIN:\n          break;\n        case this.game.STATE_RUNNING:\n          if (clickType === MOUSE.LEFT) this.keyDown[KEY.MOUSE_LEFT] = false;\n          if (clickType === MOUSE.RIGHT) this.keyDown[KEY.MOUSE_RIGHT] = false;\n          break;\n        case this.game.STATE_OVER:\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  dampSpeed() {\n    let vel = this.vel.length();\n    let maxSpeed = (this.keyDown[KEY.SHIFT] \n      ? MAX_SPRINT_SPEED \n      : MAX_SPEED)\n    if(vel > CLAMP_SPEED) {\n      this.vel.normalize().multiply(CLAMP_SPEED);\n    }\n    if(vel > maxSpeed) {\n      this.vel.multiply(DAMPENING_COEFFICIENT);\n    }\n  }\n\n  applyDecel() {\n    if(this.keyDown[KEY.W]) return;\n    if(this.keyDown[KEY.A]) return;\n    if(this.keyDown[KEY.S]) return;\n    if(this.keyDown[KEY.D]) return;\n    let result = this.vel.multiply(DECEL);\n    if (result.x < MIN_SPEED || result.x > -1 * MIN_SPEED) result.x = 0; \n    if (result.y < MIN_SPEED || result.y > -1 * MIN_SPEED) result.y = 0; \n    this.vel = result;\n  }\n\n  update() {\n    // if player is dead, simplify update loop\n    if (!this.alive) {\n      this.dampSpeed();\n      this.addVelocityTimeDelta();\n      this.applyDecel();\n      this.validateBound(this.cvs.width, this.cvs.height);\n      return;\n    }\n\n    if(this.game.cheat) {\n      this.charge = CHARGE_MAX * 2;\n      if(this.beamCooldown >= 10) this.beamCooldown = 9;\n    }\n\n    if (this.shootCooldown > 0) this.shootCooldown--;\n    if (this.dashCooldown > 0) this.dashCooldown--;\n    if (this.beamCooldown > 0) this.beamCooldown--;\n    if (this.invul >= 0) this.invul--;\n    if (this.noclip >= 0) this.noclip--;\n    if (this.charge > CHARGE_MAX * CHARGE_STACKS) this.charge = Math.floor(CHARGE_MAX * CHARGE_STACKS);\n\n    // handle combo reset logic\n    if (this.slashReset > 0) {\n      this.slashReset--;\n    } else {\n      this.slashCombo = 0;\n    }\n\n    // add sparks for charge level\n    if (this.game.loopCount % 2) {\n      if (this.charge >= this.chargeMax * 2) {\n        this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_9__[\"default\"](this.game, this.pos.x, this.pos.y, \"FINISHER\", 3, this.r * 2));\n      } else if (this.charge >= this.chargeMax) {\n        this.game.vanity.push(new _SlashSpark__WEBPACK_IMPORTED_MODULE_9__[\"default\"](this.game, this.pos.x, this.pos.y, \"CRIT\", 2, this.r * 1.5));\n      }\n    }\n    \n    // if player is paused, do not apply movement or actions\n    if (this.pauseTime > 0) {\n      this.pauseTime--;\n      if(this.pauseTime === 0) {\n        // this.vel = this.velRestoreDash;\n      } else {\n        return;\n      }\n    }\n\n    // Calculate facing direction and apply shooting controls\n    this.setAim();\n\n    if (this.keyDown[KEY.MOUSE_LEFT] && this.dashCooldown <= 0) this.dash();\n    if (this.keyDown[KEY.MOUSE_RIGHT] && this.shootCooldown <= 0) this.shoot();\n    if (!this.keyDown[KEY.MOUSE_RIGHT]) this.shooting = false;\n    if (this.keyDown[KEY.SPACE] && this.beamCooldown <= 0) this.fireBeam();\n\n    // Apply movement\n    if (this.moveState === STATE_WALKING) {\n      let offset = ACCEL * (this.keyDown[KEY.SHIFT] ? SPRINT_SPEED : 1);\n      if (this.vel.length() < MAX_SPRINT_SPEED) {\n        if (this.keyDown[KEY.W]) this.vel.y -= offset;\n        if (this.keyDown[KEY.A]) this.vel.x -= offset;\n        if (this.keyDown[KEY.S]) this.vel.y += offset;\n        if (this.keyDown[KEY.D]) this.vel.x += offset;\n      }\n\n      this.dampSpeed();\n      this.addVelocityTimeDelta();\n      this.applyDecel();\n    } else if (this.moveState === STATE_DASHING) {\n      // dash has ended\n      if (this.dashDuration <= 0) {\n        this.invul = POST_DASH_INVUL;\n        this.moveState = STATE_WALKING;\n        // this.game.particles.push(new Slam(this.game, this.pos.x, this.pos.y));\n        \n        this.game.particles.push(new _BeamSlash__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, this.slashCombo));\n        if (this.slashCombo === this.maxSlashCombo) {\n          this.dashCooldown = DASH_COOLDOWN + 60;\n          this.slashCombo = 0;\n          this.shootCooldown = this.dashCooldown - 30;\n          this.invul += 40;\n          this.noclip += 50;\n          // this.pauseTime = 5;\n        } else {\n          this.dashCooldown = DASH_COOLDOWN;\n          this.shootCooldown = this.dashCooldown + 5;\n          this.slashCombo++;\n          this.slashReset = DASH_COOLDOWN * 1.6;\n        }\n      } else {\n        this.dashDuration--;\n        this.vel.add(this.aim.normalize().multiply(DASH_SPEED));\n        this.addVelocityTimeDelta();\n      }\n    } \n\n    if (this.charging) {\n      let line  = new _Beam__WEBPACK_IMPORTED_MODULE_6__[\"default\"](this.game, this.pos.x, this.pos.y, new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](Math.random() * 2 - 1, Math.random() * 2 - 1), 0, false);\n      line.width = 10;\n      line.length = 400;\n      line.knockback = 0;\n      line.silenced = true;\n      line.unpausable = true;\n      line.aliveTime = 90;\n      line.color = _Beam__WEBPACK_IMPORTED_MODULE_6__[\"default\"].COLOR().TEAL;\n      line.cb = function () {\n        this.length *= 0.9;\n        this.width *= 0.8;\n        // this.pos.x = this.game.player.pos.x;\n        // this.pos.y = this.game.player.pos.y;\n      }\n      this.game.vanity.push(line);\n    }\n\n    this.validateBound(this.cvs.width, this.cvs.height);\n  }\n\n  // ctx.arc(x, y, r, sAngle, eAngle, [counterclockwise])\n  draw() {\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);\n    this.ctx.fillStyle = this.color;\n    this.ctx.strokeStyle = \"white\";\n\n    this.ctx.shadowBlur = 6;\n    this.ctx.shadowColor = \"white\";\n    \n    this.ctx.fill();\n    this.ctx.stroke();\n    this.ctx.closePath();\n\n    this.ctx.restore();\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Player);\n\n//# sourceURL=webpack:///./javascript/obj/Player.js?");

/***/ }),

/***/ "./javascript/obj/RangedEnemy.js":
/*!***************************************!*\
  !*** ./javascript/obj/RangedEnemy.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _Player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Player */ \"./javascript/obj/Player.js\");\n/* harmony import */ var _GameObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GameObject */ \"./javascript/obj/GameObject.js\");\n/* harmony import */ var _Explosion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Explosion */ \"./javascript/obj/Explosion.js\");\n/* harmony import */ var _EnemyCircle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EnemyCircle */ \"./javascript/obj/EnemyCircle.js\");\n/* harmony import */ var _EnemyParticle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./EnemyParticle */ \"./javascript/obj/EnemyParticle.js\");\n\n\n\n\n\n\n\n\nconst RADIUS = 8;\nconst COLOR = \"orange\";\nconst KNOCKBACK = 10;\nconst ENEMY_KNOCKBACK_MULTIPLIER = 2.5;\nconst DAMPENING_COEFFICIENT = 0.7;\nconst SPREAD_FACTOR = 2.0;\nconst HEALTH = 700;\nconst HEALTH_CAP = 1200;\nconst DAMAGE = 1;\nconst SCORE = 20;\nconst BASE_TURN_RATE = 0.25;\nconst ACCEL = 0.2;\nconst MAX_SPEED = 0.5;\nconst FIRE_COOLDOWN = 180;\nconst FIRE_VEL = 6;\n\nclass RangedEnemy extends _EnemyCircle__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\n  constructor(game) {\n    super(game);\n    this.aiCallback = () => {\n      this.aim = _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(game.player.pos, this.pos);\n      let distance = this.aim.length();\n      this.aim.normalize();\n      let turnRate = BASE_TURN_RATE + Math.pow(game.difficulty, 1 / 2);\n      this.aim.multiply(turnRate).add(this.vel).normalize();\n\n      if (distance >= 500 || !game.player.alive) {\n        this.vel.add(this.aim.multiply(this.accel));\n      } else {\n        this.vel.add(this.aim.multiply(-this.accel));\n      }\n    };\n\n    this.health = HEALTH + game.difficulty * 3;\n\n    this.accel = ACCEL + Math.random() * Math.pow(game.difficulty, 1 / 2) / 2;\n    this.maxSpeed = MAX_SPEED + Math.random() * Math.pow(game.difficulty, 1 / 2) / 2;\n\n    if (this.health > HEALTH_CAP) this.health = HEALTH_CAP;\n\n    this.attackCooldown = FIRE_COOLDOWN;\n    this.r = RADIUS;\n    this.color = COLOR;\n    this.damage = DAMAGE;\n    this.score = SCORE;\n\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n  }\n\n  fire() {\n    if (this.pos.x > this.cvs.width + this.r ||\n        this.pos.x < 0 - this.r ||\n        this.pos.y > this.cvs.height + this.r ||\n        this.pos.y < 0 - this.r ) {\n      return;\n    };\n    this.attackCooldown = FIRE_COOLDOWN;\n\n    let vel = this.pos.dup().subtract(this.game.player.pos).normalize().multiply(-FIRE_VEL);\n    let p = new _EnemyParticle__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.game, this.pos.x, this.pos.y, vel);\n    this.game.enemyParticles.push(p);\n    let explosion = new _Explosion__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.game, this.pos.x, this.pos.y);\n    explosion.aliveTime = 7;\n    explosion.r = this.r + 20;\n\n    this.game.vanity.push(explosion);\n  }\n\n  update() {\n    if (!this.alive) return;\n    this.aiCallback();\n    this.dampSpeed();\n    this.addVelocityTimeDelta();\n    this.validateBound(this.cvs.width, this.cvs.height);    \n\n    this.attackCooldown > 0 ? this.attackCooldown-- : this.fire();\n\n    // Check collision with player\n    this.checkCollision(this.game.players[0]);\n\n    // Many-many collision is very heavy - please refactor at some point or implement quadtree\n    this.game.entities.forEach(entity => this.checkCollision(entity));\n  }\n\n  // ctx.arc(x, y, r, sAngle, eAngle, [counterclockwise])\n  draw() {\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);\n    this.ctx.fillStyle = this.color;\n    this.ctx.strokeStyle = 'black';\n    this.ctx.fill();\n    this.ctx.stroke();\n    this.ctx.closePath();\n    this.ctx.restore();\n\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (RangedEnemy);\n\n//# sourceURL=webpack:///./javascript/obj/RangedEnemy.js?");

/***/ }),

/***/ "./javascript/obj/Slam.js":
/*!********************************!*\
  !*** ./javascript/obj/Slam.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EnemyCircle */ \"./javascript/obj/EnemyCircle.js\");\n/* harmony import */ var _Particle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Particle */ \"./javascript/obj/Particle.js\");\n/* harmony import */ var _DamageNumber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DamageNumber */ \"./javascript/obj/DamageNumber.js\");\n/* harmony import */ var _GameObject__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GameObject */ \"./javascript/obj/GameObject.js\");\n\n\n\n\n\n\nconst RADIUS = 100;\nconst KNOCKBACK = 150;\nconst DAMAGE = 70;\nconst GROWTH_RATE = 10;\n// const COLOR = \"white\";\n\nclass Slam extends _GameObject__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\n  constructor(game, startX, startY) {\n    super(game);\n    this.pos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](startX, startY);\n    this.vel = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    this.r = RADIUS;\n    this.color = this.game.player.color;\n    this.damage = DAMAGE;\n    this.knockback = KNOCKBACK;\n    this.aliveTime = 10;\n    this.initialTime= this.aliveTime;\n    this.growthRate = GROWTH_RATE;\n    this.cb = () => {};\n\n    // this.update = this.update.bind(this);\n    // this.draw = this.draw.bind(this);\n  }\n\n\n  checkCollision(obj) {\n    if (!obj.alive) return; //Don't check collision if object is not alive\n\n    let diff = _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(this.pos, obj.pos);\n    let distSqr = diff.dot(diff);\n    if (obj instanceof _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) {\n      if (this.r * this.r + obj.r * obj.r > distSqr) {\n        diff.normalize();\n        obj.vel.add(diff.multiply(-this.knockback));\n        obj.health -= this.damage;\n        if (obj.health <= 0) obj.alive = false;\n        this.game.vanity.push(new _DamageNumber__WEBPACK_IMPORTED_MODULE_3__[\"default\"](obj, this.damage));\n\n      }\n    }\n  }\n\n  update() {\n    if (!this.alive) return; //Don't check collision if object is not alive\n    \n    if(this.aliveTime === this.initialTime) {\n      this.game.entities.forEach(entity => { this.checkCollision(entity) });\n      this.game.freeze(5);\n    }\n    if (this.aliveTime <= 0) {\n      this.alive = false;\n    }\n    this.aliveTime--;\n    this.cb();\n  }\n\n  // ctx.arc(x, y, r, sAngle, eAngle, [counterclockwise])\n  draw() {\n    if (this.aliveTime > this.initialTime - 5) {\n      this.ctx.save();\n\n      this.ctx.beginPath();\n      this.ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);\n      this.ctx.fillStyle = this.color;\n      this.ctx.fill(); \n      this.ctx.strokeStyle = \"white\";\n      this.ctx.stroke(); \n      this.ctx.restore();\n    } else {\n      this.ctx.save();\n\n      this.r += this.growthRate;\n      this.ctx.beginPath();\n      this.ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2 * Math.PI);\n      this.ctx.fillStyle = \"rgba(0,0,0,0)\";\n      this.ctx.fill();\n      this.ctx.strokeStyle = \"white\";\n     \n      this.ctx.shadowBlur = 30;\n      this.ctx.shadowColor = this.color;\n      this.ctx.stroke();  \n\n      this.ctx.restore();\n  \n    }\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Slam);\n\n//# sourceURL=webpack:///./javascript/obj/Slam.js?");

/***/ }),

/***/ "./javascript/obj/SlashSpark.js":
/*!**************************************!*\
  !*** ./javascript/obj/SlashSpark.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _Particle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Particle */ \"./javascript/obj/Particle.js\");\n\n\n\n\nconst WIDTH = 1;\nconst LENGTH = 60;\n\nconst DURATION = 20;\n\nconst COLOR = {\n  NORMAL: [255, 255, 255],\n  CRIT: [255, 255, 0],\n  CANNON: [0, 0, 0],\n}\n//\n// hitspark for beams\n//\nclass SlashSpark extends _Particle__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  constructor(game, x, y, \n      combo = 0, \n      width = WIDTH, \n      length = LENGTH, \n      duration = DURATION, \n      angle = Math.floor(Math.random() * 360) * Math.PI / 180, \n      rotation = 0, \n      pauseState = true) {\n    super(game);\n    this.pos = new _lib_Vector__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y);\n    this.combo = combo;\n    this.width = width;\n    this.length = length;\n    this.aliveTime = duration;\n    this.initialTime = this.aliveTime;\n    this.rotation = rotation;\n    this.paused = pauseState;\n    this.cb = () => {};\n\n    this.offsets = [];\n    this.offsets.push(-Math.PI / 32 + Math.random() * Math.PI / 16);\n    this.offsets.push(-Math.PI / 32 + Math.random() * Math.PI / 16);\n    this.offsets.push(-Math.PI / 32 + Math.random() * Math.PI / 16);\n    this.offsets.push(-Math.PI / 32 + Math.random() * Math.PI / 16);\n    this.offsets.push(-Math.PI / 32 + Math.random() * Math.PI / 16);\n\n    // this.angle = Math.atan2(this.aim.y, this.aim.x);\n\n    this.angle = angle;\n    // let newAim = new Vector(1, 0);\n    // newAim.multiply(1, -1);\n\n    // let x2 = newAim.x * Math.cos(angle) - newAim.y * Math.sin(angle);\n    // let y2 = newAim.y * Math.cos(angle) + newAim.x * Math.sin(angle);\n    // // debugger\n    // this.aim = new Vector(-x2, -y2);\n\n    switch(this.combo) {\n      case \"FINISHER\":\n        this.color = COLOR.CRIT;\n        break;\n      case \"BEAM\":\n        // this.angle = (Math.atan2(this.aim.y, this.aim.x));\n        this.color = COLOR.CANNON;\n        break;\n      case \"CRIT\":\n        this.color = COLOR.CRIT;\n        break;\n      case 3:\n        this.color = COLOR.CRIT;\n        break;\n      default:\n        this.color = COLOR.NORMAL;\n        break;\n    }\n  }\n\n  checkCollision(obj) {\n    // SlashSpark does not check collision\n  }\n\n  drawRect(offset, colorIn, widthMod = 1, lengthMod = 1) {\n    \n    this.ctx.save();\n\n    let percent = this.aliveTime / this.initialTime;\n    let color;\n    if (this.combo === \"FINISHER\") {\n      this.aliveTime >= this.initialTime - 2 \n        ? color = `rgba(${colorIn[0]},${colorIn[1]},${colorIn[2]},${1})` \n        : color = `rgba(${colorIn[0]},${colorIn[1]},${colorIn[2]},${percent})`\n    } else if (this.combo === \"BEAM\") {\n      this.aliveTime >= this.initialTime - 2 \n        ? color = `rgba(255,255,255,${1})`\n        : color = `rgba(${this.color[0]},${this.color[1]},${this.color[2]},${percent})`\n    } else {\n      this.aliveTime >= this.initialTime - 1\n        ? color = `rgba(${this.color[0]},${this.color[1]},${this.color[2]},${percent})`\n        : color = `rgba(${this.color[0]},${this.color[1]},${this.color[2]},${percent - 0.3})`\n    }\n    this.ctx.fillStyle = color;\n    this.ctx.strokeStyle = color;\n    // Offset the rect based on its width but maintain origin\n    this.ctx.translate(this.pos.x + Math.sin(this.angle + offset) * widthMod * this.width / 2,\n                       this.pos.y - Math.cos(this.angle + offset) * widthMod * this.width / 2);\n    this.ctx.rotate(this.angle + offset);\n    this.ctx.fillRect(0, 0, this.length * lengthMod, widthMod * this.width);\n    this.ctx.restore();\n  }\n\n  update() {\n    this.angle += this.rotation;\n    // transient effect\n    this.width *= 0.85;\n    switch(this.combo) {\n      case \"FINISHER\":\n        this.length *= 1.005;\n        break;\n      case \"BEAM\":\n        this.length *= 0.95;\n        break;\n      default:\n      // this will alias the edges\n        this.length *= 1.001;\n        break;\n    }\n\n    if (this.aliveTime <= 0) {\n      this.alive = false;\n    }\n    this.aliveTime--;\n    this.cb();\n\n  }\n\n  draw() {\n    let color = [Math.random() * 255, Math.random() * 255, Math.random() * 255];\n    if (this.combo === \"BEAM\") {\n      if (this.aliveTime >= this.initialTime - 10) {\n        color = [255, 255, 255]\n      } else {\n        color = [0, 0, 0]\n      }\n      this.drawRect(0, color, 1    , 1.5);\n      this.drawRect(0, color, 3 / 4, 1.55);\n      this.drawRect(0, color, 1 / 3, 1.58);\n      // this.drawRect(this.offsets[1]);\n    } else {\n\n      this.drawRect(0, color);\n      this.drawRect(Math.PI, color);\n    }\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (SlashSpark);\n\n//# sourceURL=webpack:///./javascript/obj/SlashSpark.js?");

/***/ }),

/***/ "./javascript/obj/behavior/FollowPlayerAI.js":
/*!***************************************************!*\
  !*** ./javascript/obj/behavior/FollowPlayerAI.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return followPlayerAI; });\n\nfunction followPlayerAI(player) {\n\n}\n\n//# sourceURL=webpack:///./javascript/obj/behavior/FollowPlayerAI.js?");

/***/ }),

/***/ "./javascript/obj/factory/enemy_factory.js":
/*!*************************************************!*\
  !*** ./javascript/obj/factory/enemy_factory.js ***!
  \*************************************************/
/*! exports provided: randomEdgePos, spawnCircleRandom */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"randomEdgePos\", function() { return randomEdgePos; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"spawnCircleRandom\", function() { return spawnCircleRandom; });\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/Vector */ \"./javascript/lib/Vector.js\");\n/* harmony import */ var _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../EnemyCircle */ \"./javascript/obj/EnemyCircle.js\");\n/* harmony import */ var _LargeEnemyCircle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../LargeEnemyCircle */ \"./javascript/obj/LargeEnemyCircle.js\");\n/* harmony import */ var _RangedEnemy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../RangedEnemy */ \"./javascript/obj/RangedEnemy.js\");\n\n\n\n\n\n\nconst MAP = {\n  TOP: 0,\n  LEFT: 1,\n  BOTTOM: 2,\n  RIGHT: 3,\n}\n\n// const SPAWN_OFFSET = 20;\nconst BASE_TURN_RATE = 0.25;\nconst BOSS_SPAWN_RATE = 15;\nconst RANGED_SPAWN_RATE = 60;\n\nconst randomEdgePos = (canvas, radius) => {\n  let side = Math.floor(Math.random() * 4);\n\n  let pos = { x: Math.random() * canvas.width,\n              y: Math.random() * canvas.height };\n\n  switch(side) {\n    case MAP.TOP:\n      pos.y = -radius;\n      break;\n    case MAP.LEFT:\n      pos.x = -radius;\n      break;\n    case MAP.BOTTOM:\n      pos.y = canvas.height + radius;\n      break;\n    case MAP.RIGHT:\n      pos.x = canvas.width + radius;\n      break;\n  }\n\n  return pos;\n}\n\nconst spawnCircleRandom = (player) => {\n  let num = Math.floor(Math.random() * 1000);\n  let enemyRate = 0\n  let enemy;\n\n  if (num <= (enemyRate += BOSS_SPAWN_RATE)) {\n    enemy = new _LargeEnemyCircle__WEBPACK_IMPORTED_MODULE_2__[\"default\"](player.game);\n  } else if (num <= (enemyRate += RANGED_SPAWN_RATE)) {\n    enemy = new _RangedEnemy__WEBPACK_IMPORTED_MODULE_3__[\"default\"](player.game);\n  } else {\n    enemy = new _EnemyCircle__WEBPACK_IMPORTED_MODULE_1__[\"default\"](player.game);\n  }\n\n  let spawnPos = randomEdgePos(player.cvs, enemy.r);\n  enemy.pos.x = spawnPos.x;\n  enemy.pos.y = spawnPos.y;\n\n  return enemy;\n}\n\n\n\n//# sourceURL=webpack:///./javascript/obj/factory/enemy_factory.js?");

/***/ }),

/***/ "./javascript/obj/factory/particle_factory.js":
/*!****************************************************!*\
  !*** ./javascript/obj/factory/particle_factory.js ***!
  \****************************************************/
/*! exports provided: fireBulletAtCursor, fireBulletAtCursorB, fireBeamAtCursor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fireBulletAtCursor\", function() { return fireBulletAtCursor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fireBulletAtCursorB\", function() { return fireBulletAtCursorB; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fireBeamAtCursor\", function() { return fireBeamAtCursor; });\n/* harmony import */ var _Particle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Particle */ \"./javascript/obj/Particle.js\");\n/* harmony import */ var _Beam__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Beam */ \"./javascript/obj/Beam.js\");\n/* harmony import */ var _lib_Vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/Vector */ \"./javascript/lib/Vector.js\");\n\n\n\n\n\nconst BULLET_SPEED = 20;\nconst BULLET_SPREAD = 0.12;\n\nconst fireBulletAtCursor = (player) => {\n  let p = new _Particle__WEBPACK_IMPORTED_MODULE_0__[\"default\"](player.game);\n  p.pos.x = player.pos.x;\n  p.pos.y = player.pos.y;\n  p.color = \"#14ffec\";\n\n  let aim = new _lib_Vector__WEBPACK_IMPORTED_MODULE_2__[\"default\"](1, 1);\n  aim.multiply(player.aim);\n  aim.normalize();\n  aim.x += Math.random() * (BULLET_SPREAD * 2) - BULLET_SPREAD;\n  aim.y += Math.random() * (BULLET_SPREAD * 2) - BULLET_SPREAD;\n  aim.normalize();\n  p.vel = aim.multiply(BULLET_SPEED * (1 - BULLET_SPREAD ) + BULLET_SPREAD / 2 + Math.random() * BULLET_SPREAD);\n  p.pos.add(aim.dup().normalize().multiply(-1 * Math.random() * 10));\n  player.game.particles.push(p);\n}\n\nconst fireBulletAtCursorB = (player) => {\n  let p = new _Particle__WEBPACK_IMPORTED_MODULE_0__[\"default\"](player.game);\n  p.pos.x = player.pos.x;\n  p.pos.y = player.pos.y;\n  p.color = 'orange';\n  p.damage = 25;\n  p.r = 3;\n\n  let aim = new _lib_Vector__WEBPACK_IMPORTED_MODULE_2__[\"default\"](1, 1);\n  let spread = BULLET_SPREAD / 2;\n  aim.multiply(player.aim);\n  aim.normalize();\n  aim.x += Math.random() * (spread * 2) - spread;\n  aim.y += Math.random() * (spread * 2) - spread;\n  aim.normalize();\n  p.vel = aim.multiply(BULLET_SPEED * 1.3 * (1 - spread) + spread / 2 + Math.random() * spread);\n  p.pos.add(aim.dup().normalize().multiply(-1 * Math.random() * 50));\n  player.game.particles.push(p);\n}\n\nconst fireBeamAtCursor = (player) => {\n  let p = new _Beam__WEBPACK_IMPORTED_MODULE_1__[\"default\"](player.game, player.pos.x, player.pos.y);\n  p.color = player.color;\n\n  let aim = new _lib_Vector__WEBPACK_IMPORTED_MODULE_2__[\"default\"](1, 1);\n  aim.multiply(player.aim);\n  aim.normalize();\n  p.aim = aim;\n  \n  return p;\n}\n\n\n\n//# sourceURL=webpack:///./javascript/obj/factory/particle_factory.js?");

/***/ })

/******/ });